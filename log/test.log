  [1m[35m (19.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "ecommerce_test"[0m
  [1m[35m (189.7ms)[0m  [1m[35mCREATE DATABASE "ecommerce_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (1.4ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "admins" CASCADE[0m
  [1m[35m (18.4ms)[0m  [1m[35mCREATE TABLE "admins" ("id" bigserial primary key, "user_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE INDEX "index_admins_on_user_id" ON "admins" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "categories" CASCADE[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "categories" ("id" bigserial primary key, "name" character varying NOT NULL, "user_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "categories_products" CASCADE[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "categories_products" ("product_id" bigint, "category_id" bigint)[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE INDEX "index_categories_products_on_category_id" ON "categories_products" ("category_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE INDEX "index_categories_products_on_product_id" ON "categories_products" ("product_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "clients" CASCADE[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "clients" ("id" bigserial primary key, "user_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE INDEX "index_clients_on_user_id" ON "clients" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "images" CASCADE[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "images" ("id" bigserial primary key, "product_id" bigint, "image" character varying, "image_file_name" character varying, "image_content_type" character varying, "image_file_size" character varying, "image_updated_at" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE INDEX "index_images_on_product_id" ON "images" ("product_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "logs" CASCADE[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "logs" ("id" bigserial primary key, "user_id" bigint, "model_type" character varying NOT NULL, "model_id" integer, "log_type" character varying NOT NULL, "log_changes" text, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE INDEX "index_logs_on_user_id" ON "logs" ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "products" CASCADE[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE TABLE "products" ("id" bigserial primary key, "name" character varying NOT NULL, "price" decimal DEFAULT 0.0 NOT NULL, "product_type" character varying NOT NULL, "user_id" integer, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "purchases" CASCADE[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "purchases" ("id" bigserial primary key, "product_id" bigint, "user_id" integer, "quantity" integer NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE INDEX "index_purchases_on_product_id" ON "purchases" ("product_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "name" character varying NOT NULL, "email" character varying NOT NULL, "password" character varying NOT NULL, "type" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (10.9ms)[0m  [1m[35mALTER TABLE "admins" ADD CONSTRAINT "fk_rails_378b9734e4"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "clients" ADD CONSTRAINT "fk_rails_21c421fd41"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.7ms)[0m  [1m[35mALTER TABLE "images" ADD CONSTRAINT "fk_rails_bd36e75ae4"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "logs" ADD CONSTRAINT "fk_rails_8fc980bf44"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "purchases" ADD CONSTRAINT "fk_rails_0d630f0bc7"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("id")
[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20240105325938)[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20240105232153),
(20240105054502),
(20240105044418),
(20240105044408),
(20240105044400),
(20240105034454),
(20240105022653),
(20240105020225);[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2024-01-08 10:18:04.140373', '2024-01-08 10:18:04.140376') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '4341ca376b5d5f1fd47e2b84c7bc6f19f854764b', '2024-01-08 10:18:04.143581', '2024-01-08 10:18:04.143583') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (3.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Processing by ProductsController#most_purchased_products_by_category as HTML
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 16ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 2076)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Processing by ProductsController#three_most_profit_products_by_category as HTML
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms | Allocations: 190)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Processing by ProductsController#most_purchased_products_by_category as HTML
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 2076)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Dr. Elliot Cole"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "eugene@doyle.biz"], ["LIMIT", 1]]
  [1m[36mAdmin Create (2.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Dr. Elliot Cole"], ["email", "eugene@doyle.biz"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 10:34:06.603900"], ["updated_at", "2024-01-08 10:34:06.603900"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Processing by ProductsController#three_most_profit_products_by_category as HTML
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 190)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
Processing by ProductsController#most_purchased_products_by_category as HTML
Completed 404 Not Found in 28ms (ActiveRecord: 2.0ms | Allocations: 13188)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Adolphus Strosin"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "leann_mcdermott@christiansen.name"], ["LIMIT", 1]]
  [1m[36mAdmin Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Adolphus Strosin"], ["email", "leann_mcdermott@christiansen.name"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 10:45:54.293349"], ["updated_at", "2024-01-08 10:45:54.293349"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#most_purchased_products_by_category as HTML
Completed 404 Not Found in 4ms (ActiveRecord: 0.0ms | Allocations: 2091)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Genesis Konopelski"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jaylin_berge@hillsdurgan.biz"], ["LIMIT", 1]]
  [1m[36mAdmin Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Genesis Konopelski"], ["email", "jaylin_berge@hillsdurgan.biz"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 10:46:27.286112"], ["updated_at", "2024-01-08 10:46:27.286112"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#most_purchased_products_by_category as HTML
Completed 404 Not Found in 121576ms (ActiveRecord: 0.0ms | Allocations: 15920)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Mr. Freida Koch"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "king.armstrong@orn.info"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Mr. Freida Koch"], ["email", "king.armstrong@orn.info"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 10:48:33.723763"], ["updated_at", "2024-01-08 10:48:33.723763"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#most_purchased_products_by_category as HTML
  Parameters: {"user_id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (5.3ms)[0m  [1m[34mSELECT products.*, categories.name AS category_name, COUNT(purchases.id) AS purchases_count FROM "products" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" LEFT OUTER JOIN "purchases" ON "purchases"."product_id" = "products"."id" GROUP BY products.id, categories.name ORDER BY purchases_count DESC[0m
Completed 200 OK in 3939ms (Views: 0.3ms | ActiveRecord: 13.1ms | Allocations: 48710)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Vilma Kovacek"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "nick_wuckert@beattyemmerich.co.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Vilma Kovacek"], ["email", "nick_wuckert@beattyemmerich.co.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 10:49:22.818871"], ["updated_at", "2024-01-08 10:49:22.818871"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#three_most_profit_products_by_category as HTML
  Parameters: {"user_id"=>"5"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProduct Load (4.9ms)[0m  [1m[34mSELECT products.*, categories.name AS category_name, SUM(products.price * purchases.quantity) AS total_profit FROM "products" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" LEFT OUTER JOIN "purchases" ON "purchases"."product_id" = "products"."id" GROUP BY products.id, categories.name ORDER BY categories.name, total_profit DESC[0m
Completed 200 OK in 1810ms (Views: 0.2ms | ActiveRecord: 9.7ms | Allocations: 46139)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Anais Thiel"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "price.walsh@purdyparisian.name"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Anais Thiel"], ["email", "price.walsh@purdyparisian.name"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 10:49:24.722237"], ["updated_at", "2024-01-08 10:49:24.722237"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#most_purchased_products_by_category as HTML
  Parameters: {"user_id"=>"6"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT products.*, categories.name AS category_name, COUNT(purchases.id) AS purchases_count FROM "products" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" LEFT OUTER JOIN "purchases" ON "purchases"."product_id" = "products"."id" GROUP BY products.id, categories.name ORDER BY purchases_count DESC[0m
Completed 200 OK in 667ms (Views: 0.2ms | ActiveRecord: 0.8ms | Allocations: 4862)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Sherwood Kris"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "judson_christiansen@leuschkedaugherty.uk"], ["LIMIT", 1]]
  [1m[36mClient Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Sherwood Kris"], ["email", "judson_christiansen@leuschkedaugherty.uk"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 10:52:05.986845"], ["updated_at", "2024-01-08 10:52:05.986845"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#most_purchased_products_by_category as HTML
  Parameters: {"user_id"=>"7"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.3ms | Allocations: 2818)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Tiara Roberts"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "annamae@gerlachkling.us"], ["LIMIT", 1]]
  [1m[36mClient Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Tiara Roberts"], ["email", "annamae@gerlachkling.us"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 10:53:34.646825"], ["updated_at", "2024-01-08 10:53:34.646825"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#most_purchased_products_by_category as HTML
  Parameters: {"user_id"=>"8"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 2824)
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Pearlie Mosciski"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "louisa@kunze.ca"], ["LIMIT", 1]]
  [1m[36mClient Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Pearlie Mosciski"], ["email", "louisa@kunze.ca"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 10:58:06.049713"], ["updated_at", "2024-01-08 10:58:06.049713"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#most_purchased_products_by_category as HTML
  Parameters: {"user_id"=>"9"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 8ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 2824)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Jensen Stark"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "tommie_lockman@mrazmayert.info"], ["LIMIT", 1]]
  [1m[36mClient Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Jensen Stark"], ["email", "tommie_lockman@mrazmayert.info"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 10:58:18.169862"], ["updated_at", "2024-01-08 10:58:18.169862"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#most_purchased_products_by_category as HTML
  Parameters: {"user_id"=>"10"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 2824)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Processing by ProductsController#three_most_profit_products_by_category as HTML
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 194)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Jillian Wyman DVM"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sheila_herzog@hermiston.info"], ["LIMIT", 1]]
  [1m[36mClient Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Jillian Wyman DVM"], ["email", "sheila_herzog@hermiston.info"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 10:59:34.735184"], ["updated_at", "2024-01-08 10:59:34.735184"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#most_purchased_products_by_category as HTML
  Parameters: {"user_id"=>"11"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 11], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 2824)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Marlin Vandervort"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "velda@jacobsonschneider.info"], ["LIMIT", 1]]
  [1m[36mClient Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Marlin Vandervort"], ["email", "velda@jacobsonschneider.info"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 10:59:34.808921"], ["updated_at", "2024-01-08 10:59:34.808921"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#three_most_profit_products_by_category as HTML
  Parameters: {"user_id"=>"12"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 12], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 420)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Derick Connelly"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "esperanza.heaney@stokes.co.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Derick Connelly"], ["email", "esperanza.heaney@stokes.co.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:01:34.976947"], ["updated_at", "2024-01-08 11:01:34.976947"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#most_purchased_products_by_category as HTML
  Parameters: {"user_id"=>"13"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 2067)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Sabryna McDermott"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "blanca_weber@jacobs.biz"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Sabryna McDermott"], ["email", "blanca_weber@jacobs.biz"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:01:36.747573"], ["updated_at", "2024-01-08 11:01:36.747573"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#three_most_profit_products_by_category as HTML
  Parameters: {"user_id"=>"14"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 189)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Marcus Braun"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jarvis@jacobi.biz"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Marcus Braun"], ["email", "jarvis@jacobi.biz"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:01:36.757613"], ["updated_at", "2024-01-08 11:01:36.757613"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#three_most_profit_products_by_category as HTML
  Parameters: {"user_id"=>"15"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 15], ["LIMIT", 1]]
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT products.*, categories.name AS category_name, SUM(products.price * purchases.quantity) AS total_profit FROM "products" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" LEFT OUTER JOIN "purchases" ON "purchases"."product_id" = "products"."id" GROUP BY products.id, categories.name ORDER BY categories.name, total_profit DESC[0m
Completed 200 OK in 50ms (Views: 0.1ms | ActiveRecord: 5.6ms | Allocations: 32747)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Cristobal Koch IV"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "frieda.rice@zieme.co.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Cristobal Koch IV"], ["email", "frieda.rice@zieme.co.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:01:36.816250"], ["updated_at", "2024-01-08 11:01:36.816250"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#most_purchased_products_by_category as HTML
  Parameters: {"user_id"=>"16"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 16], ["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT products.*, categories.name AS category_name, COUNT(purchases.id) AS purchases_count FROM "products" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" LEFT OUTER JOIN "purchases" ON "purchases"."product_id" = "products"."id" GROUP BY products.id, categories.name ORDER BY purchases_count DESC[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 1.1ms | Allocations: 983)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Hallie Nienow"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sibyl@connbrakus.name"], ["LIMIT", 1]]
  [1m[36mClient Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Hallie Nienow"], ["email", "sibyl@connbrakus.name"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:01:36.835902"], ["updated_at", "2024-01-08 11:01:36.835902"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#three_most_profit_products_by_category as HTML
  Parameters: {"user_id"=>"17"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 17], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.3ms | ActiveRecord: 0.7ms | Allocations: 437)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (3.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Austen O'Keefe"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jensen_legros@dietrich.ca"], ["LIMIT", 1]]
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Austen O'Keefe"], ["email", "jensen_legros@dietrich.ca"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:01:36.850754"], ["updated_at", "2024-01-08 11:01:36.850754"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#most_purchased_products_by_category as HTML
  Parameters: {"user_id"=>"18"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 18], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 421)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Giovani Huel IV"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "amara_schinner@rippinzieme.co.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Giovani Huel IV"], ["email", "amara_schinner@rippinzieme.co.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:02:00.218544"], ["updated_at", "2024-01-08 11:02:00.218544"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#three_most_profit_products_by_category as HTML
  Parameters: {"user_id"=>"19"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 19], ["LIMIT", 1]]
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT products.*, categories.name AS category_name, SUM(products.price * purchases.quantity) AS total_profit FROM "products" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" LEFT OUTER JOIN "purchases" ON "purchases"."product_id" = "products"."id" GROUP BY products.id, categories.name ORDER BY categories.name, total_profit DESC[0m
Completed 200 OK in 40ms (Views: 0.2ms | ActiveRecord: 6.5ms | Allocations: 34710)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Lon Hartmann"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "marley@skiles.co.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Lon Hartmann"], ["email", "marley@skiles.co.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:02:00.341312"], ["updated_at", "2024-01-08 11:02:00.341312"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#most_purchased_products_by_category as HTML
  Parameters: {"user_id"=>"20"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT products.*, categories.name AS category_name, COUNT(purchases.id) AS purchases_count FROM "products" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" LEFT OUTER JOIN "purchases" ON "purchases"."product_id" = "products"."id" GROUP BY products.id, categories.name ORDER BY purchases_count DESC[0m
Completed 200 OK in 3ms (Views: 0.1ms | ActiveRecord: 0.8ms | Allocations: 986)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Abelardo Gutmann"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "glenna_collins@wunschschultz.co.uk"], ["LIMIT", 1]]
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Abelardo Gutmann"], ["email", "glenna_collins@wunschschultz.co.uk"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:02:00.356302"], ["updated_at", "2024-01-08 11:02:00.356302"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#three_most_profit_products_by_category as HTML
  Parameters: {"user_id"=>"21"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 21], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 457)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Dr. Malvina Kuvalis"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "kaleigh@walsh.name"], ["LIMIT", 1]]
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Dr. Malvina Kuvalis"], ["email", "kaleigh@walsh.name"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:02:00.365970"], ["updated_at", "2024-01-08 11:02:00.365970"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#most_purchased_products_by_category as HTML
  Parameters: {"user_id"=>"22"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 22], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms | Allocations: 422)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Mrs. Henry Romaguera"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "edythe.luettgen@padbergharris.com"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Mrs. Henry Romaguera"], ["email", "edythe.luettgen@padbergharris.com"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:02:00.374703"], ["updated_at", "2024-01-08 11:02:00.374703"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#three_most_profit_products_by_category as HTML
  Parameters: {"user_id"=>"23"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 192)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Brett Schultz"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "emiliano@hodkiewicz.us"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Brett Schultz"], ["email", "emiliano@hodkiewicz.us"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:02:00.382400"], ["updated_at", "2024-01-08 11:02:00.382400"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by ProductsController#most_purchased_products_by_category as HTML
  Parameters: {"user_id"=>"24"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 190)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (6.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Kellen Fritsch"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "liam_price@greenfelder.info"], ["LIMIT", 1]]
  [1m[36mClient Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Kellen Fritsch"], ["email", "liam_price@greenfelder.info"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:12:58.108771"], ["updated_at", "2024-01-08 11:12:58.108771"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"25"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 25], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 2824)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Laila Cremin"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jedediah@abbottaltenwerth.info"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Laila Cremin"], ["email", "jedediah@abbottaltenwerth.info"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:12:58.219429"], ["updated_at", "2024-01-08 11:12:58.219429"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"26"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 26], ["LIMIT", 1]]
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms | Allocations: 1211)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Josefina O'Keefe"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mohamed@bergnaum.us"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Josefina O'Keefe"], ["email", "mohamed@bergnaum.us"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:12:58.232120"], ["updated_at", "2024-01-08 11:12:58.232120"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"27"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 192)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Mervin Armstrong"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "lura@vonrueden.biz"], ["LIMIT", 1]]
  [1m[36mAdmin Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Mervin Armstrong"], ["email", "lura@vonrueden.biz"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:13:44.967216"], ["updated_at", "2024-01-08 11:13:44.967216"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"28"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.3ms | Allocations: 3435)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Lila Ledner"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dorian@rohan.us"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Lila Ledner"], ["email", "dorian@rohan.us"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:14:18.986035"], ["updated_at", "2024-01-08 11:14:18.986035"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"29"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 279)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Eve Gottlieb"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "amparo.swift@wunsch.ca"], ["LIMIT", 1]]
  [1m[36mClient Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Eve Gottlieb"], ["email", "amparo.swift@wunsch.ca"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:14:19.005301"], ["updated_at", "2024-01-08 11:14:19.005301"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"30"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.6ms | ActiveRecord: 0.4ms | Allocations: 438)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Tabitha Dickens"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "marcia_toy@barton.ca"], ["LIMIT", 1]]
  [1m[36mClient Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Tabitha Dickens"], ["email", "marcia_toy@barton.ca"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:14:22.875955"], ["updated_at", "2024-01-08 11:14:22.875955"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"31"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 2824)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Leon O'Conner"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "kristian_hauck@sawayn.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Leon O'Conner"], ["email", "kristian_hauck@sawayn.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:14:24.107107"], ["updated_at", "2024-01-08 11:14:24.107107"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"32"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.5ms | Allocations: 1168)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Muriel Kuphal Sr."], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "darlene_bode@cole.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Muriel Kuphal Sr."], ["email", "darlene_bode@cole.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:14:48.881020"], ["updated_at", "2024-01-08 11:14:48.881020"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"33"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 191)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Jo Barrows"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "rene.lebsack@heaney.name"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Jo Barrows"], ["email", "rene.lebsack@heaney.name"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:14:51.878594"], ["updated_at", "2024-01-08 11:14:51.878594"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"34"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 2067)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Ferne Schultz"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mauricio@dooley.co.uk"], ["LIMIT", 1]]
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Ferne Schultz"], ["email", "mauricio@dooley.co.uk"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:14:51.953850"], ["updated_at", "2024-01-08 11:14:51.953850"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"35"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 826)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Mr. Dane Nader"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "reva@haneschneider.co.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Mr. Dane Nader"], ["email", "reva@haneschneider.co.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:14:53.123477"], ["updated_at", "2024-01-08 11:14:53.123477"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAdmin Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."type" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["type", "Admin"], ["id", 36], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Example category"], ["LIMIT", 1]]
  [1m[36mCategory Create (1.3ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Example category"], ["user_id", 36], ["created_at", "2024-01-08 11:14:53.160746"], ["updated_at", "2024-01-08 11:14:53.160746"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mCategory Load (0.3ms)[0m  [1m[34mSELECT "categories".* FROM "categories" ORDER BY "categories"."id" DESC LIMIT $1[0m  [["LIMIT", 1]]
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"36"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.0ms | Allocations: 1136)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Albertha Beier"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "elouise@haag.co.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Albertha Beier"], ["email", "elouise@haag.co.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:16:00.787561"], ["updated_at", "2024-01-08 11:16:00.787561"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"37"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 2067)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Hilton Franecki"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "edgar.oberbrunner@buckridgeglover.name"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Hilton Franecki"], ["email", "edgar.oberbrunner@buckridgeglover.name"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:16:03.355044"], ["updated_at", "2024-01-08 11:16:03.355044"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"38"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
Completed 500 Internal Server Error in 28ms (ActiveRecord: 5.4ms | Allocations: 1627)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Quinn Grant"], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "elena_labadie@gibson.biz"], ["LIMIT", 1]]
  [1m[36mClient Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Quinn Grant"], ["email", "elena_labadie@gibson.biz"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:17:17.596435"], ["updated_at", "2024-01-08 11:17:17.596435"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"39"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 438)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Ms. Clyde Schmidt"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "antwan_johnston@osinskiklein.com"], ["LIMIT", 1]]
  [1m[36mClient Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Ms. Clyde Schmidt"], ["email", "antwan_johnston@osinskiklein.com"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:17:21.956674"], ["updated_at", "2024-01-08 11:17:21.956674"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"40"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 9ms (Views: 0.3ms | ActiveRecord: 0.4ms | Allocations: 2824)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Okey Parisian"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "shanon_braun@kub.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Okey Parisian"], ["email", "shanon_braun@kub.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:17:23.436874"], ["updated_at", "2024-01-08 11:17:23.436874"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Example category"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.3ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Example category"], ["user_id", 41], ["created_at", "2024-01-08 11:18:12.654304"], ["updated_at", "2024-01-08 11:18:12.654304"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Gilberto Bins"], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "carlotta_durgan@sauer.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (2.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Gilberto Bins"], ["email", "carlotta_durgan@sauer.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:18:19.594120"], ["updated_at", "2024-01-08 11:18:19.594120"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Werner Rempel V"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "danial.swaniawski@jacobi.us"], ["LIMIT", 1]]
  [1m[36mAdmin Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Werner Rempel V"], ["email", "danial.swaniawski@jacobi.us"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:18:23.183410"], ["updated_at", "2024-01-08 11:18:23.183410"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Example category"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Orval Cruickshank"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "trevor_spinka@grimes.biz"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Orval Cruickshank"], ["email", "trevor_spinka@grimes.biz"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:18:27.776877"], ["updated_at", "2024-01-08 11:18:27.776877"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mAdmin Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."type" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["type", "Admin"], ["id", 41], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Example category"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.3ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Example category"], ["user_id", 41], ["created_at", "2024-01-08 11:18:27.790063"], ["updated_at", "2024-01-08 11:18:27.790063"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"41"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms | Allocations: 1117)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Kattie Schumm"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "fermin@mckenzie.biz"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Kattie Schumm"], ["email", "fermin@mckenzie.biz"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:18:42.569993"], ["updated_at", "2024-01-08 11:18:42.569993"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"45"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.8ms | ActiveRecord: 0.0ms | Allocations: 191)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Kristoffer Abbott DVM"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "cesar@kirlin.biz"], ["LIMIT", 1]]
  [1m[36mAdmin Create (2.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Kristoffer Abbott DVM"], ["email", "cesar@kirlin.biz"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:24:14.351573"], ["updated_at", "2024-01-08 11:24:14.351573"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Yessenia Bednar"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "maryse@oreilly.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Yessenia Bednar"], ["email", "maryse@oreilly.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:24:14.377527"], ["updated_at", "2024-01-08 11:24:14.377527"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"46"}
  [1m[36mUser Load (16.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 46], ["LIMIT", 1]]
Completed 500 Internal Server Error in 49ms (ActiveRecord: 16.1ms | Allocations: 3015)
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Bradley Thompson"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "thora_ankunding@maggiobahringer.ca"], ["LIMIT", 1]]
  [1m[36mClient Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Bradley Thompson"], ["email", "thora_ankunding@maggiobahringer.ca"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:25:33.501994"], ["updated_at", "2024-01-08 11:25:33.501994"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"48"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 48], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.3ms | ActiveRecord: 0.2ms | Allocations: 525)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Dr. Clyde Senger"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "helen@buckridge.us"], ["LIMIT", 1]]
  [1m[36mAdmin Create (3.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Dr. Clyde Senger"], ["email", "helen@buckridge.us"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:25:33.532899"], ["updated_at", "2024-01-08 11:25:33.532899"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"49"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 191)
  [1m[36mTRANSACTION (4.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Ashlee Hand"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "donavon.bernier@kassulke.uk"], ["LIMIT", 1]]
  [1m[36mClient Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Ashlee Hand"], ["email", "donavon.bernier@kassulke.uk"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:25:38.220066"], ["updated_at", "2024-01-08 11:25:38.220066"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"50"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 50], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 2824)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Amber Hahn"], ["LIMIT", 1]]
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "autumn@cremincorkery.name"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Amber Hahn"], ["email", "autumn@cremincorkery.name"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:25:39.962225"], ["updated_at", "2024-01-08 11:25:39.962225"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Camron Kassulke"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jalyn@donnelly.us"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Camron Kassulke"], ["email", "jalyn@donnelly.us"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:25:39.997223"], ["updated_at", "2024-01-08 11:25:39.997223"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Rickie Collier"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ted@kovacek.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Rickie Collier"], ["email", "ted@kovacek.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:25:47.366528"], ["updated_at", "2024-01-08 11:25:47.366528"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"51"}
  [1m[36mUser Load (8.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 51], ["LIMIT", 1]]
Completed 500 Internal Server Error in 20ms (ActiveRecord: 8.6ms | Allocations: 1136)
  [1m[36mTRANSACTION (4.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (6.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Francesca Kautzer"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "waylon_beer@treutelwintheiser.info"], ["LIMIT", 1]]
  [1m[36mAdmin Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Francesca Kautzer"], ["email", "waylon_beer@treutelwintheiser.info"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:26:19.246297"], ["updated_at", "2024-01-08 11:26:19.246297"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"54"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 8ms (Views: 7.4ms | ActiveRecord: 0.0ms | Allocations: 191)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Ivory Stanton"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "josefina_barrows@ritchie.com"], ["LIMIT", 1]]
  [1m[36mClient Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Ivory Stanton"], ["email", "josefina_barrows@ritchie.com"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:26:24.464273"], ["updated_at", "2024-01-08 11:26:24.464273"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"55"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 55], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 2824)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Randall Bayer"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "carter@kassulke.co.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Randall Bayer"], ["email", "carter@kassulke.co.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:26:25.867060"], ["updated_at", "2024-01-08 11:26:25.867060"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Example category"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.3ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Example category"], ["user_id", 56], ["created_at", "2024-01-08 11:26:25.903005"], ["updated_at", "2024-01-08 11:26:25.903005"]]
  [1m[36mLog Create (1.1ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 4], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:26:25.934666"], ["updated_at", "2024-01-08 11:26:25.934666"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Juwan Stehr"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "hailey@brownjones.co.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Juwan Stehr"], ["email", "hailey@brownjones.co.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:26:27.308812"], ["updated_at", "2024-01-08 11:26:27.308812"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Example category"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"56"}
  [1m[36mUser Load (13.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 56], ["LIMIT", 1]]
Completed 500 Internal Server Error in 41ms (ActiveRecord: 13.6ms | Allocations: 1154)
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Mrs. Hal Quitzon"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "antwon_gaylord@purdy.name"], ["LIMIT", 1]]
  [1m[36mAdmin Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Mrs. Hal Quitzon"], ["email", "antwon_gaylord@purdy.name"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:27:28.897196"], ["updated_at", "2024-01-08 11:27:28.897196"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"58"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 192)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Oswaldo Corkery"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "orrin@okuneva.co.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Oswaldo Corkery"], ["email", "orrin@okuneva.co.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:27:33.910074"], ["updated_at", "2024-01-08 11:27:33.910074"]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"59"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 2067)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Hadley Leuschke"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "cloyd@oreillycrist.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Hadley Leuschke"], ["email", "cloyd@oreillycrist.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:27:36.058383"], ["updated_at", "2024-01-08 11:27:36.058383"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Matilde Orn"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.5ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Matilde Orn"], ["user_id", 60], ["created_at", "2024-01-08 11:27:36.093682"], ["updated_at", "2024-01-08 11:27:36.093682"]]
  [1m[36mLog Create (0.6ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 5], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:27:36.118171"], ["updated_at", "2024-01-08 11:27:36.118171"]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Adam Breitenberg I"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "norberto_stoltenberg@konopelski.biz"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Adam Breitenberg I"], ["email", "norberto_stoltenberg@konopelski.biz"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:27:36.175787"], ["updated_at", "2024-01-08 11:27:36.175787"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Alda Bartoletti"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.2ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Alda Bartoletti"], ["user_id", 61], ["created_at", "2024-01-08 11:27:36.178597"], ["updated_at", "2024-01-08 11:27:36.178597"]]
  [1m[36mLog Create (0.3ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 6], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:27:36.179888"], ["updated_at", "2024-01-08 11:27:36.179888"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Meda Schiller"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "maud@starklockman.co.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Meda Schiller"], ["email", "maud@starklockman.co.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:27:40.867616"], ["updated_at", "2024-01-08 11:27:40.867616"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Alfonso Daniel"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.5ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Alfonso Daniel"], ["user_id", 62], ["created_at", "2024-01-08 11:27:40.871601"], ["updated_at", "2024-01-08 11:27:40.871601"]]
  [1m[36mLog Create (1.9ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 7], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:27:40.873512"], ["updated_at", "2024-01-08 11:27:40.873512"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"60"}
  [1m[36mUser Load (17.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 60], ["LIMIT", 1]]
Completed 500 Internal Server Error in 26ms (ActiveRecord: 17.3ms | Allocations: 1296)
  [1m[36mTRANSACTION (4.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Pearl Barrows"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "avery_spinka@klocko.biz"], ["LIMIT", 1]]
  [1m[36mClient Create (2.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Pearl Barrows"], ["email", "avery_spinka@klocko.biz"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:29:36.010589"], ["updated_at", "2024-01-08 11:29:36.010589"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"63"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 63], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 438)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Kaya Herman"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "zelda_collins@cronamcdermott.com"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Kaya Herman"], ["email", "zelda_collins@cronamcdermott.com"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:29:40.874814"], ["updated_at", "2024-01-08 11:29:40.874814"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"64"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 2067)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Jean Willms DVM"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "gayle.schuppe@hansen.us"], ["LIMIT", 1]]
  [1m[36mClient Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Jean Willms DVM"], ["email", "gayle.schuppe@hansen.us"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:29:40.994878"], ["updated_at", "2024-01-08 11:29:40.994878"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"65"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 65], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 825)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Tabitha Braun"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "tyrel@gislasonlarkin.name"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Tabitha Braun"], ["email", "tyrel@gislasonlarkin.name"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:29:43.254603"], ["updated_at", "2024-01-08 11:29:43.254603"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Axel Williamson"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "elisha@schiller.info"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Axel Williamson"], ["email", "elisha@schiller.info"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:29:43.296923"], ["updated_at", "2024-01-08 11:29:43.296923"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Ara Reichert"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.4ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Ara Reichert"], ["user_id", 67], ["created_at", "2024-01-08 11:29:43.305023"], ["updated_at", "2024-01-08 11:29:43.305023"]]
  [1m[36mLog Create (0.7ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 8], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:29:43.364934"], ["updated_at", "2024-01-08 11:29:43.364934"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"66"}
  [1m[36mUser Load (8.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 66], ["LIMIT", 1]]
Completed 500 Internal Server Error in 16ms (ActiveRecord: 8.9ms | Allocations: 1142)
  [1m[36mTRANSACTION (4.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Alexzander McDermott"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "darrell.mann@howelltorphy.biz"], ["LIMIT", 1]]
  [1m[36mClient Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Alexzander McDermott"], ["email", "darrell.mann@howelltorphy.biz"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:31:03.866888"], ["updated_at", "2024-01-08 11:31:03.866888"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"68"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 68], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 2825)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Mazie Littel"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bryana@beahan.ca"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Mazie Littel"], ["email", "bryana@beahan.ca"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:31:04.009859"], ["updated_at", "2024-01-08 11:31:04.009859"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"69"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 192)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Maddison Conn"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "roosevelt@kessler.name"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Maddison Conn"], ["email", "roosevelt@kessler.name"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:31:05.455056"], ["updated_at", "2024-01-08 11:31:05.455056"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 70], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Mr. Enos Borer"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.7ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Mr. Enos Borer"], ["user_id", 70], ["created_at", "2024-01-08 11:31:05.489483"], ["updated_at", "2024-01-08 11:31:05.489483"]]
  [1m[36mLog Create (0.7ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 9], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:31:05.514109"], ["updated_at", "2024-01-08 11:31:05.514109"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"70"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 70], ["LIMIT", 1]]
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.3ms | Allocations: 1189)
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Darryl Ward"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "shawn@anderson.ca"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Darryl Ward"], ["email", "shawn@anderson.ca"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:31:22.518831"], ["updated_at", "2024-01-08 11:31:22.518831"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"71"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 2067)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Alden Hoeger"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "nova_mueller@muraziktoy.info"], ["LIMIT", 1]]
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Alden Hoeger"], ["email", "nova_mueller@muraziktoy.info"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:31:22.643532"], ["updated_at", "2024-01-08 11:31:22.643532"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"72"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 72], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 825)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Manuel Tremblay"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "elliott_gleason@feeneysteuber.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Manuel Tremblay"], ["email", "elliott_gleason@feeneysteuber.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:31:23.438347"], ["updated_at", "2024-01-08 11:31:23.438347"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Jarred Bergnaum"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "burnice.bode@ziemerolfson.us"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Jarred Bergnaum"], ["email", "burnice.bode@ziemerolfson.us"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:31:23.521937"], ["updated_at", "2024-01-08 11:31:23.521937"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Jeremie Luettgen"], ["LIMIT", 1]]
  [1m[36mCategory Create (3.4ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Jeremie Luettgen"], ["user_id", 74], ["created_at", "2024-01-08 11:31:23.542097"], ["updated_at", "2024-01-08 11:31:23.542097"]]
  [1m[36mLog Create (0.7ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 10], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:31:23.608973"], ["updated_at", "2024-01-08 11:31:23.608973"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"73"}
  [1m[36mUser Load (10.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 73], ["LIMIT", 1]]
Completed 500 Internal Server Error in 23ms (ActiveRecord: 10.2ms | Allocations: 1202)
  [1m[36mTRANSACTION (4.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Ole Hegmann"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "judah@leffler.us"], ["LIMIT", 1]]
  [1m[36mClient Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Ole Hegmann"], ["email", "judah@leffler.us"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:33:48.108128"], ["updated_at", "2024-01-08 11:33:48.108128"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"75"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 75], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 9ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 2824)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Matt Davis"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "cornell@koelpin.co.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Matt Davis"], ["email", "cornell@koelpin.co.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:33:49.246283"], ["updated_at", "2024-01-08 11:33:49.246283"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Sylvester Dietrich Jr."], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76], ["LIMIT", 1]]
  [1m[36mProduct Create (2.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Sylvester Dietrich Jr."], ["price", "0.0"], ["product_type", nil], ["user_id", 76], ["created_at", "2024-01-08 11:33:49.287912"], ["updated_at", "2024-01-08 11:33:49.287912"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Dr. Fredrick Keebler"], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76], ["LIMIT", 1]]
  [1m[36mProduct Create (0.5ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Dr. Fredrick Keebler"], ["price", "0.0"], ["product_type", nil], ["user_id", 76], ["created_at", "2024-01-08 11:33:50.547442"], ["updated_at", "2024-01-08 11:33:50.547442"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"76"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 76], ["LIMIT", 1]]
Completed 500 Internal Server Error in 8ms (ActiveRecord: 2.0ms | Allocations: 1140)
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Cassandra Lowe"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "kenya@christiansenkub.us"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Cassandra Lowe"], ["email", "kenya@christiansenkub.us"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:34:14.124491"], ["updated_at", "2024-01-08 11:34:14.124491"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"77"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 191)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Novella Thompson PhD"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "frederik@jones.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Novella Thompson PhD"], ["email", "frederik@jones.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:34:19.951251"], ["updated_at", "2024-01-08 11:34:19.951251"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Margot Durgan"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
  [1m[36mProduct Create (3.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Margot Durgan"], ["price", "0.0"], ["product_type", "Nuevo"], ["user_id", 78], ["created_at", "2024-01-08 11:34:20.004422"], ["updated_at", "2024-01-08 11:34:20.004422"]]
  [1m[36mLog Create (0.5ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 3], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:34:20.053804"], ["updated_at", "2024-01-08 11:34:20.053804"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Caitlyn Rodriguez"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "evangeline_ziemann@pouros.com"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Caitlyn Rodriguez"], ["email", "evangeline_ziemann@pouros.com"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:34:20.076427"], ["updated_at", "2024-01-08 11:34:20.076427"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Stephan Littel"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.2ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Stephan Littel"], ["user_id", 79], ["created_at", "2024-01-08 11:34:20.079456"], ["updated_at", "2024-01-08 11:34:20.079456"]]
  [1m[36mLog Create (0.3ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 11], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:34:20.080617"], ["updated_at", "2024-01-08 11:34:20.080617"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct::HABTM_Categories Create (1.0ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 3], ["category_id", 11]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"78"}
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 78], ["LIMIT", 1]]
Completed 500 Internal Server Error in 17ms (ActiveRecord: 4.7ms | Allocations: 3226)
  [1m[36mTRANSACTION (5.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Rosemarie Bode"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ned@bode.uk"], ["LIMIT", 1]]
  [1m[36mClient Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Rosemarie Bode"], ["email", "ned@bode.uk"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:34:55.401141"], ["updated_at", "2024-01-08 11:34:55.401141"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"80"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 80], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 528)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Mr. Melvin Tremblay"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "okey@wolff.info"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Mr. Melvin Tremblay"], ["email", "okey@wolff.info"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:34:55.417949"], ["updated_at", "2024-01-08 11:34:55.417949"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"81"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 192)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Tremayne Gulgowski"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jermey@langosh.ca"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Tremayne Gulgowski"], ["email", "jermey@langosh.ca"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:35:00.076032"], ["updated_at", "2024-01-08 11:35:00.076032"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"82"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.3ms | ActiveRecord: 0.0ms | Allocations: 2067)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Jake Cummings"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dora@hayes.info"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Jake Cummings"], ["email", "dora@hayes.info"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:35:01.366214"], ["updated_at", "2024-01-08 11:35:01.366214"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Garrison Dicki"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
  [1m[36mProduct Create (0.5ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Garrison Dicki"], ["price", "226.7439381751869"], ["product_type", "Nuevo"], ["user_id", 83], ["created_at", "2024-01-08 11:35:01.402556"], ["updated_at", "2024-01-08 11:35:01.402556"]]
  [1m[36mLog Create (0.4ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 4], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:35:01.425321"], ["updated_at", "2024-01-08 11:35:01.425321"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Garry Miller"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "isaiah_quigley@moore.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Garry Miller"], ["email", "isaiah_quigley@moore.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:35:01.476372"], ["updated_at", "2024-01-08 11:35:01.476372"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Nick Paucek"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.2ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Nick Paucek"], ["user_id", 84], ["created_at", "2024-01-08 11:35:01.479784"], ["updated_at", "2024-01-08 11:35:01.479784"]]
  [1m[36mLog Create (0.2ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 12], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:35:01.481030"], ["updated_at", "2024-01-08 11:35:01.481030"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct::HABTM_Categories Create (1.0ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 4], ["category_id", 12]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"83"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 83], ["LIMIT", 1]]
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.9ms | Allocations: 1313)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Quinn Ruecker"], ["LIMIT", 1]]
  [1m[36mUser Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "davon_howe@turner.name"], ["LIMIT", 1]]
  [1m[36mClient Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Quinn Ruecker"], ["email", "davon_howe@turner.name"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:35:25.953598"], ["updated_at", "2024-01-08 11:35:25.953598"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"85"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 85], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 438)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Hobart Rogahn Sr."], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "tiara_quigley@russel.ca"], ["LIMIT", 1]]
  [1m[36mClient Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Hobart Rogahn Sr."], ["email", "tiara_quigley@russel.ca"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:41:47.711938"], ["updated_at", "2024-01-08 11:41:47.711938"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"86"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 86], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 8ms (Views: 0.2ms | ActiveRecord: 0.9ms | Allocations: 2824)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Ronny Weissnat"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "lisa_bergstrom@mclaughlin.co.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Ronny Weissnat"], ["email", "lisa_bergstrom@mclaughlin.co.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:41:47.911758"], ["updated_at", "2024-01-08 11:41:47.911758"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"87"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 193)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Laney Schulist"], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "augusta@hane.biz"], ["LIMIT", 1]]
  [1m[36mClient Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Laney Schulist"], ["email", "augusta@hane.biz"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:41:50.631723"], ["updated_at", "2024-01-08 11:41:50.631723"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Sam Paucek"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "emiliano.wiegand@gerhold.biz"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Sam Paucek"], ["email", "emiliano.wiegand@gerhold.biz"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:41:50.642541"], ["updated_at", "2024-01-08 11:41:50.642541"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Fabiola Keeling"], ["LIMIT", 1]]
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Fabiola Keeling"], ["price", "166.2088990331059"], ["product_type", "Nuevo"], ["user_id", 89], ["created_at", "2024-01-08 11:41:50.704877"], ["updated_at", "2024-01-08 11:41:50.704877"]]
  [1m[36mLog Create (0.9ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 5], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:41:50.747240"], ["updated_at", "2024-01-08 11:41:50.747240"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Kathleen Harris"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dawson_balistreri@jast.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Kathleen Harris"], ["email", "dawson_balistreri@jast.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:41:50.780523"], ["updated_at", "2024-01-08 11:41:50.780523"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Jared Moen IV"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.5ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Jared Moen IV"], ["user_id", 90], ["created_at", "2024-01-08 11:41:50.786273"], ["updated_at", "2024-01-08 11:41:50.786273"]]
  [1m[36mLog Create (0.4ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 13], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:41:50.789925"], ["updated_at", "2024-01-08 11:41:50.789925"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct::HABTM_Categories Create (0.8ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 5], ["category_id", 13]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mClient Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."type" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["type", "Client"], ["id", 88], ["LIMIT", 1]]
  [1m[36mPurchase Create (1.7ms)[0m  [1m[32mINSERT INTO "purchases" ("product_id", "user_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 5], ["user_id", 88], ["quantity", 7], ["created_at", "2024-01-08 11:41:50.848278"], ["updated_at", "2024-01-08 11:41:50.848278"]]
  [1m[36mPurchase Count (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "purchases" WHERE "purchases"."product_id" = $1[0m  [["product_id", 5]]
[ActiveJob] Enqueued SendFirstPurchaseEmailJob (Job ID: 9b619435-1836-4563-8fd2-a1d2a1926155) to Sidekiq(default) with arguments: 5
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (7.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (10.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
  [1m[36mCategory Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Charlotte Jast"], ["LIMIT", 1]]
  [1m[36mCategory Create (1.2ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Charlotte Jast"], ["user_id", 89], ["created_at", "2024-01-08 11:42:30.358873"], ["updated_at", "2024-01-08 11:42:30.358873"]]
  [1m[36mLog Create (2.2ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 14], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:42:30.362562"], ["updated_at", "2024-01-08 11:42:30.362562"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"89", "category_id"=>"14", "product_id"=>"5", "user_id"=>"89"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 89], ["LIMIT", 1]]
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.2ms | Allocations: 1133)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Elisa Tillman"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "major_mueller@rolfson.name"], ["LIMIT", 1]]
  [1m[36mClient Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Elisa Tillman"], ["email", "major_mueller@rolfson.name"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:42:36.267937"], ["updated_at", "2024-01-08 11:42:36.267937"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"91"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 91], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 15ms (Views: 0.9ms | ActiveRecord: 2.0ms | Allocations: 2824)
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Emely Volkman"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "lance.dibbert@jacobi.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (1.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Emely Volkman"], ["email", "lance.dibbert@jacobi.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:42:36.466064"], ["updated_at", "2024-01-08 11:42:36.466064"]]
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"92"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 192)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (5.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (10.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Hank Gleason"], ["LIMIT", 1]]
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "lavern@rodriguez.co.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Hank Gleason"], ["email", "lavern@rodriguez.co.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:42:41.220574"], ["updated_at", "2024-01-08 11:42:41.220574"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Sandra Beatty II"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.9ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Sandra Beatty II"], ["user_id", 93], ["created_at", "2024-01-08 11:42:41.272212"], ["updated_at", "2024-01-08 11:42:41.272212"]]
  [1m[36mLog Create (1.2ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 15], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:42:41.304588"], ["updated_at", "2024-01-08 11:42:41.304588"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Chandler Yost"], ["LIMIT", 1]]
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
  [1m[36mProduct Create (0.8ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Chandler Yost"], ["price", "91.34050115172113"], ["product_type", "Nuevo"], ["user_id", 93], ["created_at", "2024-01-08 11:42:41.371399"], ["updated_at", "2024-01-08 11:42:41.371399"]]
  [1m[36mLog Create (0.4ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 6], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:42:41.376032"], ["updated_at", "2024-01-08 11:42:41.376032"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Savanah Schultz Sr."], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "adan@dibbertmoen.name"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Savanah Schultz Sr."], ["email", "adan@dibbertmoen.name"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:42:41.390029"], ["updated_at", "2024-01-08 11:42:41.390029"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Stanton Cremin"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.3ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Stanton Cremin"], ["user_id", 94], ["created_at", "2024-01-08 11:42:41.392629"], ["updated_at", "2024-01-08 11:42:41.392629"]]
  [1m[36mLog Create (0.2ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 16], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:42:41.393824"], ["updated_at", "2024-01-08 11:42:41.393824"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct::HABTM_Categories Create (0.4ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 6], ["category_id", 16]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Kayley Boyer"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bessie.parker@prohaska.co.uk"], ["LIMIT", 1]]
  [1m[36mClient Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Kayley Boyer"], ["email", "bessie.parker@prohaska.co.uk"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:42:41.428540"], ["updated_at", "2024-01-08 11:42:41.428540"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"93", "category_id"=>"15", "client_id"=>"95", "product_id"=>"6", "user_id"=>"93"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 93], ["LIMIT", 1]]
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms | Allocations: 1147)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Jaqueline Rutherford MD"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sabrina_dubuque@ferrykautzer.com"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Jaqueline Rutherford MD"], ["email", "sabrina_dubuque@ferrykautzer.com"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:42:46.835783"], ["updated_at", "2024-01-08 11:42:46.835783"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"96"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.4ms | ActiveRecord: 0.0ms | Allocations: 2067)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Ima Funk"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "harmon.hintz@simonismitchell.us"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Ima Funk"], ["email", "harmon.hintz@simonismitchell.us"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:42:46.942350"], ["updated_at", "2024-01-08 11:42:46.942350"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 97], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Elvis Reinger"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.3ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Elvis Reinger"], ["user_id", 97], ["created_at", "2024-01-08 11:42:46.971602"], ["updated_at", "2024-01-08 11:42:46.971602"]]
  [1m[36mLog Create (0.5ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 17], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:42:47.002665"], ["updated_at", "2024-01-08 11:42:47.002665"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Roma Kassulke"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 97], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Roma Kassulke"], ["price", "193.6322941108707"], ["product_type", "Nuevo"], ["user_id", 97], ["created_at", "2024-01-08 11:42:47.028591"], ["updated_at", "2024-01-08 11:42:47.028591"]]
  [1m[36mLog Create (0.4ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 7], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:42:47.030710"], ["updated_at", "2024-01-08 11:42:47.030710"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Allie Roberts"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "rhoda_white@kleinmohr.biz"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Allie Roberts"], ["email", "rhoda_white@kleinmohr.biz"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:42:47.063764"], ["updated_at", "2024-01-08 11:42:47.063764"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Neva Weissnat"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.4ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Neva Weissnat"], ["user_id", 98], ["created_at", "2024-01-08 11:42:47.067237"], ["updated_at", "2024-01-08 11:42:47.067237"]]
  [1m[36mLog Create (0.4ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 18], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:42:47.068973"], ["updated_at", "2024-01-08 11:42:47.068973"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct::HABTM_Categories Create (0.6ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 7], ["category_id", 18]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Norwood Leffler"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "aric@wehner.co.uk"], ["LIMIT", 1]]
  [1m[36mClient Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Norwood Leffler"], ["email", "aric@wehner.co.uk"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:42:47.094854"], ["updated_at", "2024-01-08 11:42:47.094854"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"97", "category_id"=>"17", "client_id"=>"99", "product_id"=>"7", "user_id"=>"97"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 97], ["LIMIT", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.3ms | Allocations: 1331)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Ila Ondricka"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "verner.simonis@watsica.uk"], ["LIMIT", 1]]
  [1m[36mClient Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Ila Ondricka"], ["email", "verner.simonis@watsica.uk"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:42:47.108749"], ["updated_at", "2024-01-08 11:42:47.108749"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"100"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 100], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 437)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Kraig Auer"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mina@lehnerrutherford.ca"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Kraig Auer"], ["email", "mina@lehnerrutherford.ca"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:43:49.689632"], ["updated_at", "2024-01-08 11:43:49.689632"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Halle Johns Jr."], ["LIMIT", 1]]
  [1m[36mCategory Create (0.3ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Halle Johns Jr."], ["user_id", 101], ["created_at", "2024-01-08 11:43:49.726022"], ["updated_at", "2024-01-08 11:43:49.726022"]]
  [1m[36mLog Create (1.3ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 19], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:43:49.748888"], ["updated_at", "2024-01-08 11:43:49.748888"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Idella Rosenbaum"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Idella Rosenbaum"], ["price", "341.5651312252385"], ["product_type", "Nuevo"], ["user_id", 101], ["created_at", "2024-01-08 11:43:49.782397"], ["updated_at", "2024-01-08 11:43:49.782397"]]
  [1m[36mLog Create (0.3ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 8], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:43:49.785289"], ["updated_at", "2024-01-08 11:43:49.785289"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Bryana Stanton"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ryley@aufderhar.name"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Bryana Stanton"], ["email", "ryley@aufderhar.name"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:43:49.796858"], ["updated_at", "2024-01-08 11:43:49.796858"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Nicklaus Collier DDS"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.4ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Nicklaus Collier DDS"], ["user_id", 102], ["created_at", "2024-01-08 11:43:49.800831"], ["updated_at", "2024-01-08 11:43:49.800831"]]
  [1m[36mLog Create (0.4ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 20], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:43:49.802297"], ["updated_at", "2024-01-08 11:43:49.802297"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct::HABTM_Categories Create (0.4ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 8], ["category_id", 20]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Jake Koch"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "sophia@leuschke.biz"], ["LIMIT", 1]]
  [1m[36mClient Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Jake Koch"], ["email", "sophia@leuschke.biz"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:43:49.830871"], ["updated_at", "2024-01-08 11:43:49.830871"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"101", "category_id"=>"19", "client_id"=>"103", "end_date"=>"2024-01-08 23:59:59 UTC", "product_id"=>"8", "start_date"=>"2024-01-08 00:00:00 UTC", "user_id"=>"101"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 101], ["LIMIT", 1]]
  [1m[36mPurchase Load (2.3ms)[0m  [1m[34mSELECT purchases.* FROM "purchases" INNER JOIN "products" ON "products"."id" = "purchases"."product_id" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" WHERE (categories.id = '19') AND (products.user_id = '101') AND (purchases.user_id = '103') AND "purchases"."created_at" BETWEEN $1 AND $2[0m  [["created_at", "2024-01-08 00:00:00"], ["created_at", "2024-01-08 23:59:59.999999"]]
Completed 200 OK in 28ms (Views: 7.8ms | ActiveRecord: 5.0ms | Allocations: 9538)
  [1m[36mTRANSACTION (7.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (4.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Jody Robel"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "may.grant@stehr.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Jody Robel"], ["email", "may.grant@stehr.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:45:11.006741"], ["updated_at", "2024-01-08 11:45:11.006741"]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"104"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms | Allocations: 213)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Devan Grady"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "danielle.runolfsdottir@dibbertabernathy.us"], ["LIMIT", 1]]
  [1m[36mClient Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Devan Grady"], ["email", "danielle.runolfsdottir@dibbertabernathy.us"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:45:11.020984"], ["updated_at", "2024-01-08 11:45:11.020984"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"105"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 105], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.4ms | Allocations: 437)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Maudie Bernhard"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "krystal_lebsack@fahey.info"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Maudie Bernhard"], ["email", "krystal_lebsack@fahey.info"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:45:15.504623"], ["updated_at", "2024-01-08 11:45:15.504623"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 106], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Paul Casper DDS"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.6ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Paul Casper DDS"], ["user_id", 106], ["created_at", "2024-01-08 11:45:15.538655"], ["updated_at", "2024-01-08 11:45:15.538655"]]
  [1m[36mLog Create (0.5ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 21], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:45:15.573953"], ["updated_at", "2024-01-08 11:45:15.573953"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Mr. Luisa Klocko"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 106], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Mr. Luisa Klocko"], ["price", "244.3394872914834"], ["product_type", "Nuevo"], ["user_id", 106], ["created_at", "2024-01-08 11:45:15.610168"], ["updated_at", "2024-01-08 11:45:15.610168"]]
  [1m[36mLog Create (0.4ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 9], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:45:15.612530"], ["updated_at", "2024-01-08 11:45:15.612530"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Rosalia Deckow III"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "susan@bodereilly.ca"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Rosalia Deckow III"], ["email", "susan@bodereilly.ca"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:45:15.624580"], ["updated_at", "2024-01-08 11:45:15.624580"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Danielle Gusikowski"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.6ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Danielle Gusikowski"], ["user_id", 107], ["created_at", "2024-01-08 11:45:15.628539"], ["updated_at", "2024-01-08 11:45:15.628539"]]
  [1m[36mLog Create (0.4ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 22], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:45:15.630528"], ["updated_at", "2024-01-08 11:45:15.630528"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct::HABTM_Categories Create (0.4ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 9], ["category_id", 22]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Graciela Wintheiser"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "lisandro@ortiz.biz"], ["LIMIT", 1]]
  [1m[36mClient Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Graciela Wintheiser"], ["email", "lisandro@ortiz.biz"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:45:15.659228"], ["updated_at", "2024-01-08 11:45:15.659228"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"106", "category_id"=>"21", "client_id"=>"108", "end_date"=>"2024-01-08", "product_id"=>"9", "start_date"=>"2024-01-08", "user_id"=>"106"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 106], ["LIMIT", 1]]
  [1m[36mPurchase Load (1.7ms)[0m  [1m[34mSELECT purchases.* FROM "purchases" INNER JOIN "products" ON "products"."id" = "purchases"."product_id" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" WHERE (categories.id = '21') AND (products.user_id = '106') AND (purchases.user_id = '108') AND "purchases"."created_at" BETWEEN $1 AND $2[0m  [["created_at", "2024-01-08 00:00:00"], ["created_at", "2024-01-08 23:59:59.999999"]]
Completed 200 OK in 24780ms (Views: 9.7ms | ActiveRecord: 3.7ms | Allocations: 31500)
  [1m[36mTRANSACTION (10.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (8.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Calista Buckridge"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "brandy_kris@faheykeebler.ca"], ["LIMIT", 1]]
  [1m[36mClient Create (2.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Calista Buckridge"], ["email", "brandy_kris@faheykeebler.ca"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:46:11.762848"], ["updated_at", "2024-01-08 11:46:11.762848"]]
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"109"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 109], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms | Allocations: 459)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Lizeth Schuster"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "peggie@kuvalis.us"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Lizeth Schuster"], ["email", "peggie@kuvalis.us"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:46:11.781413"], ["updated_at", "2024-01-08 11:46:11.781413"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"110"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 191)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (2.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Torrey Durgan"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jeromy@franecki.com"], ["LIMIT", 1]]
  [1m[36mClient Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Torrey Durgan"], ["email", "jeromy@franecki.com"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:46:57.671112"], ["updated_at", "2024-01-08 11:46:57.671112"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Garrett Dibbert V"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "phyllis@kuhlman.info"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Garrett Dibbert V"], ["email", "phyllis@kuhlman.info"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:46:57.683046"], ["updated_at", "2024-01-08 11:46:57.683046"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Carmel Grady"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 112], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Carmel Grady"], ["price", "287.1140185894567"], ["product_type", "Nuevo"], ["user_id", 112], ["created_at", "2024-01-08 11:46:57.726859"], ["updated_at", "2024-01-08 11:46:57.726859"]]
  [1m[36mLog Create (0.8ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 10], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:46:57.764946"], ["updated_at", "2024-01-08 11:46:57.764946"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Nicolette Ernser"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "rosendo.larson@walsh.us"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Nicolette Ernser"], ["email", "rosendo.larson@walsh.us"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:46:57.791001"], ["updated_at", "2024-01-08 11:46:57.791001"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Jammie Smitham"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.2ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Jammie Smitham"], ["user_id", 113], ["created_at", "2024-01-08 11:46:57.794441"], ["updated_at", "2024-01-08 11:46:57.794441"]]
  [1m[36mLog Create (0.3ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 23], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:46:57.795682"], ["updated_at", "2024-01-08 11:46:57.795682"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct::HABTM_Categories Create (0.3ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 10], ["category_id", 23]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mClient Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."type" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["type", "Client"], ["id", 111], ["LIMIT", 1]]
  [1m[36mPurchase Create (0.5ms)[0m  [1m[32mINSERT INTO "purchases" ("product_id", "user_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 10], ["user_id", 111], ["quantity", 2], ["created_at", "2024-01-08 11:46:57.835438"], ["updated_at", "2024-01-08 11:46:57.835438"]]
  [1m[36mPurchase Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "purchases" WHERE "purchases"."product_id" = $1[0m  [["product_id", 10]]
[ActiveJob] Enqueued SendFirstPurchaseEmailJob (Job ID: ea27068b-92b3-43e8-84a4-54e7d1bad91a) to Sidekiq(default) with arguments: 10
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (10.9ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (20.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 112], ["LIMIT", 1]]
  [1m[36mCategory Exists? (9.7ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Julia Runolfsdottir"], ["LIMIT", 1]]
  [1m[36mCategory Create (1.0ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Julia Runolfsdottir"], ["user_id", 112], ["created_at", "2024-01-08 11:51:09.725654"], ["updated_at", "2024-01-08 11:51:09.725654"]]
  [1m[36mLog Create (1.5ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 24], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:51:09.730300"], ["updated_at", "2024-01-08 11:51:09.730300"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"112", "category_id"=>"24", "client_id"=>"111", "end_date"=>"2024-01-08", "product_id"=>"10", "start_date"=>"2024-01-08", "user_id"=>"112"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 112], ["LIMIT", 1]]
  [1m[36mPurchase Load (0.7ms)[0m  [1m[34mSELECT purchases.* FROM "purchases" INNER JOIN "products" ON "products"."id" = "purchases"."product_id" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" WHERE (categories.id = '24') AND (products.user_id = '112') AND (purchases.user_id = '111') AND "purchases"."created_at" BETWEEN $1 AND $2[0m  [["created_at", "2024-01-08 00:00:00"], ["created_at", "2024-01-08 23:59:59.999999"]]
Completed 200 OK in 1018ms (Views: 9.7ms | ActiveRecord: 0.9ms | Allocations: 11155)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Mrs. Bella Cole"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "kristina_dickinson@wunschgislason.info"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Mrs. Bella Cole"], ["email", "kristina_dickinson@wunschgislason.info"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:51:11.800455"], ["updated_at", "2024-01-08 11:51:11.800455"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"114"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 213)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Loyce Luettgen"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "santa.mueller@farrellrenner.biz"], ["LIMIT", 1]]
  [1m[36mClient Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Loyce Luettgen"], ["email", "santa.mueller@farrellrenner.biz"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:51:11.811477"], ["updated_at", "2024-01-08 11:51:11.811477"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"115"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 115], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 426)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Dr. Crystal Runolfsdottir"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "coby_klocko@price.ca"], ["LIMIT", 1]]
  [1m[36mAdmin Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Dr. Crystal Runolfsdottir"], ["email", "coby_klocko@price.ca"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:51:24.123860"], ["updated_at", "2024-01-08 11:51:24.123860"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Hilbert Konopelski"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 116], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Hilbert Konopelski"], ["price", "269.4871837872194"], ["product_type", "Nuevo"], ["user_id", 116], ["created_at", "2024-01-08 11:51:24.164372"], ["updated_at", "2024-01-08 11:51:24.164372"]]
  [1m[36mLog Create (0.8ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 11], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:51:24.189381"], ["updated_at", "2024-01-08 11:51:24.189381"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 116], ["LIMIT", 1]]
  [1m[36mCategory Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Dr. Judge Schamberger"], ["LIMIT", 1]]
  [1m[36mCategory Create (1.6ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Dr. Judge Schamberger"], ["user_id", 116], ["created_at", "2024-01-08 11:51:54.743940"], ["updated_at", "2024-01-08 11:51:54.743940"]]
  [1m[36mLog Create (1.4ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 25], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:51:54.747554"], ["updated_at", "2024-01-08 11:51:54.747554"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Jimmy Mertz"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "annette.powlowski@lefflerbradtke.us"], ["LIMIT", 1]]
  [1m[36mClient Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Jimmy Mertz"], ["email", "annette.powlowski@lefflerbradtke.us"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:51:54.766227"], ["updated_at", "2024-01-08 11:51:54.766227"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"116", "category_id"=>"25", "client_id"=>"117", "end_date"=>"2024-01-08", "start_date"=>"2024-01-08", "user_id"=>"116"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 116], ["LIMIT", 1]]
  [1m[36mPurchase Load (0.7ms)[0m  [1m[34mSELECT purchases.* FROM "purchases" INNER JOIN "products" ON "products"."id" = "purchases"."product_id" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" WHERE (categories.id = '25') AND (products.user_id = '116') AND (purchases.user_id = '117') AND "purchases"."created_at" BETWEEN $1 AND $2[0m  [["created_at", "2024-01-08 00:00:00"], ["created_at", "2024-01-08 23:59:59.999999"]]
Completed 200 OK in 1513ms (Views: 10.4ms | ActiveRecord: 3.3ms | Allocations: 14864)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Braulio Schmitt"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "karli_dietrich@marks.uk"], ["LIMIT", 1]]
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Braulio Schmitt"], ["email", "karli_dietrich@marks.uk"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:51:57.071644"], ["updated_at", "2024-01-08 11:51:57.071644"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"118"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 118], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 462)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Cassidy Schmidt"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "laron@grimes.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Cassidy Schmidt"], ["email", "laron@grimes.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:51:57.083274"], ["updated_at", "2024-01-08 11:51:57.083274"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"119"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 192)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Alexandrea VonRueden Sr."], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "josiah@williamsonrath.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Alexandrea VonRueden Sr."], ["email", "josiah@williamsonrath.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:52:02.483167"], ["updated_at", "2024-01-08 11:52:02.483167"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"120"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 2067)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Garnett Schumm"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "prince_mills@cronin.biz"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Garnett Schumm"], ["email", "prince_mills@cronin.biz"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:52:05.760684"], ["updated_at", "2024-01-08 11:52:05.760684"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Retta Brekke"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 121], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Retta Brekke"], ["price", "262.2818498283361"], ["product_type", "Nuevo"], ["user_id", 121], ["created_at", "2024-01-08 11:52:05.819868"], ["updated_at", "2024-01-08 11:52:05.819868"]]
  [1m[36mLog Create (0.5ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 12], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:52:05.850495"], ["updated_at", "2024-01-08 11:52:05.850495"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 121], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Cody Wuckert"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.3ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Cody Wuckert"], ["user_id", 121], ["created_at", "2024-01-08 11:54:21.377154"], ["updated_at", "2024-01-08 11:54:21.377154"]]
  [1m[36mLog Create (0.9ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 26], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:54:21.378934"], ["updated_at", "2024-01-08 11:54:21.378934"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Gardner Klocko"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "eino@wiegandgrady.biz"], ["LIMIT", 1]]
  [1m[36mClient Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Gardner Klocko"], ["email", "eino@wiegandgrady.biz"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:54:21.397752"], ["updated_at", "2024-01-08 11:54:21.397752"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"121", "category_id"=>"26", "client_id"=>"122", "end_date"=>"2024-01-08", "start_date"=>"2024-01-08", "user_id"=>"121"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 121], ["LIMIT", 1]]
  [1m[36mPurchase Load (0.8ms)[0m  [1m[34mSELECT purchases.* FROM "purchases" INNER JOIN "products" ON "products"."id" = "purchases"."product_id" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" WHERE (categories.id = '26') AND (products.user_id = '121') AND (purchases.user_id = '122') AND "purchases"."created_at" BETWEEN $1 AND $2[0m  [["created_at", "2024-01-08 00:00:00"], ["created_at", "2024-01-08 23:59:59.999999"]]
Completed 200 OK in 1528ms (Views: 10.4ms | ActiveRecord: 3.2ms | Allocations: 12932)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Gerry Rowe"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ryder_bayer@kemmer.biz"], ["LIMIT", 1]]
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Gerry Rowe"], ["email", "ryder_bayer@kemmer.biz"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:54:23.395986"], ["updated_at", "2024-01-08 11:54:23.395986"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"123"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 123], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms | Allocations: 437)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Kyler Green"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "alfredo@blandaboyer.co.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Kyler Green"], ["email", "alfredo@blandaboyer.co.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:55:45.606928"], ["updated_at", "2024-01-08 11:55:45.606928"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"124"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 2067)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Stella Fritsch MD"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "betty_bartoletti@schneider.info"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Stella Fritsch MD"], ["email", "betty_bartoletti@schneider.info"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:55:45.734902"], ["updated_at", "2024-01-08 11:55:45.734902"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Marge Bednar"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "harmony@dooley.com"], ["LIMIT", 1]]
  [1m[36mClient Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Marge Bednar"], ["email", "harmony@dooley.com"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:55:45.751472"], ["updated_at", "2024-01-08 11:55:45.751472"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"126"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 126], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 826)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Bernice Hamill"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "irwin.koelpin@nitzsche.co.uk"], ["LIMIT", 1]]
  [1m[36mClient Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Bernice Hamill"], ["email", "irwin.koelpin@nitzsche.co.uk"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:56:34.638762"], ["updated_at", "2024-01-08 11:56:34.638762"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"127"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 127], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 2824)
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Laisha Haley III"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mabelle_boyer@schuster.us"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Laisha Haley III"], ["email", "mabelle_boyer@schuster.us"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:56:34.799730"], ["updated_at", "2024-01-08 11:56:34.799730"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 128], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Mara Bernhard"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.3ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Mara Bernhard"], ["user_id", 128], ["created_at", "2024-01-08 11:56:34.830791"], ["updated_at", "2024-01-08 11:56:34.830791"]]
  [1m[36mLog Create (0.5ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 27], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:56:34.880372"], ["updated_at", "2024-01-08 11:56:34.880372"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 AND "categories"."id" != $2 LIMIT $3[0m  [["name", "Mara Bernhard"], ["id", 27], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 128], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (4.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (8.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Christop Fay DDS"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "maude_labadie@schroeder.co.uk"], ["LIMIT", 1]]
  [1m[36mClient Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Christop Fay DDS"], ["email", "maude_labadie@schroeder.co.uk"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:57:07.527979"], ["updated_at", "2024-01-08 11:57:07.527979"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"128", "category_id"=>"27", "client_id"=>"129", "end_date"=>"2024-01-08", "start_date"=>"2024-01-08", "user_id"=>"128"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 128], ["LIMIT", 1]]
  [1m[36mPurchase Load (1.2ms)[0m  [1m[34mSELECT purchases.* FROM "purchases" INNER JOIN "products" ON "products"."id" = "purchases"."product_id" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" WHERE (categories.id = '27') AND (products.user_id = '128') AND (purchases.user_id = '129') AND "purchases"."created_at" BETWEEN $1 AND $2[0m  [["created_at", "2024-01-08 00:00:00"], ["created_at", "2024-01-08 23:59:59.999999"]]
Completed 200 OK in 1692ms (Views: 13.1ms | ActiveRecord: 4.9ms | Allocations: 12546)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Lora Bruen"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "arch@braun.us"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Lora Bruen"], ["email", "arch@braun.us"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:57:09.807030"], ["updated_at", "2024-01-08 11:57:09.807030"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"130"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 191)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Rowan Howell"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "kali_bartell@hermannmuller.name"], ["LIMIT", 1]]
  [1m[36mClient Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Rowan Howell"], ["email", "kali_bartell@hermannmuller.name"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:57:16.227691"], ["updated_at", "2024-01-08 11:57:16.227691"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"131"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 131], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.2ms | ActiveRecord: 0.6ms | Allocations: 2824)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Darron King"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "samir_haag@reichel.name"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Darron King"], ["email", "samir_haag@reichel.name"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:57:16.404111"], ["updated_at", "2024-01-08 11:57:16.404111"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 132], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Bennie Schmidt"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.5ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Bennie Schmidt"], ["user_id", 132], ["created_at", "2024-01-08 11:57:16.436383"], ["updated_at", "2024-01-08 11:57:16.436383"]]
  [1m[36mLog Create (1.1ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 28], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:57:16.494340"], ["updated_at", "2024-01-08 11:57:16.494340"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 AND "categories"."id" != $2 LIMIT $3[0m  [["name", "Bennie Schmidt"], ["id", 28], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 AND "categories"."id" != $2 LIMIT $3[0m  [["name", "Bennie Schmidt"], ["id", 28], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (4.6ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (16.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Mrs. Marcos Goodwin"], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "haylie_ohara@dickenseichmann.ca"], ["LIMIT", 1]]
  [1m[36mClient Create (3.8ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Mrs. Marcos Goodwin"], ["email", "haylie_ohara@dickenseichmann.ca"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:58:48.419710"], ["updated_at", "2024-01-08 11:58:48.419710"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"132", "category_id"=>"28", "client_id"=>"133", "end_date"=>"2024-01-08", "start_date"=>"2024-01-08", "user_id"=>"132"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 132], ["LIMIT", 1]]
  [1m[36mPurchase Load (1.0ms)[0m  [1m[34mSELECT purchases.* FROM "purchases" INNER JOIN "products" ON "products"."id" = "purchases"."product_id" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" WHERE (categories.id = '28') AND (products.user_id = '132') AND (purchases.user_id = '133') AND "purchases"."created_at" BETWEEN $1 AND $2[0m  [["created_at", "2024-01-08 00:00:00"], ["created_at", "2024-01-08 23:59:59.999999"]]
Completed 200 OK in 839ms (Views: 12.4ms | ActiveRecord: 5.6ms | Allocations: 12547)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Gilberto Murphy"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "elta@bechtelar.co.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Gilberto Murphy"], ["email", "elta@bechtelar.co.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:58:49.764028"], ["updated_at", "2024-01-08 11:58:49.764028"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"134"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 191)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Jayson Botsford"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "talon.miller@simonissmith.name"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Jayson Botsford"], ["email", "talon.miller@simonissmith.name"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:58:54.298505"], ["updated_at", "2024-01-08 11:58:54.298505"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 135], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Dr. Kristopher Skiles"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.4ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Dr. Kristopher Skiles"], ["user_id", 135], ["created_at", "2024-01-08 11:58:54.341795"], ["updated_at", "2024-01-08 11:58:54.341795"]]
  [1m[36mLog Create (0.4ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 29], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:58:54.367328"], ["updated_at", "2024-01-08 11:58:54.367328"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Milo Abbott"], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 AND "categories"."id" != $2 LIMIT $3[0m  [["name", "Dr. Kristopher Skiles"], ["id", 29], ["LIMIT", 1]]
  [1m[36mProduct Create (1.6ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Milo Abbott"], ["price", "84.65762439411388"], ["product_type", nil], ["user_id", 135], ["created_at", "2024-01-08 11:58:54.384711"], ["updated_at", "2024-01-08 11:58:54.384711"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Lura Deckow DDS"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "reina.baumbach@rempel.uk"], ["LIMIT", 1]]
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Lura Deckow DDS"], ["email", "reina.baumbach@rempel.uk"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:58:54.436624"], ["updated_at", "2024-01-08 11:58:54.436624"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"136"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 136], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 10ms (Views: 0.3ms | ActiveRecord: 0.3ms | Allocations: 2626)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (3.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Virginie Davis"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "lenore.nienow@nader.co.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Virginie Davis"], ["email", "lenore.nienow@nader.co.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:58:54.540830"], ["updated_at", "2024-01-08 11:58:54.540830"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"137"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 192)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Kristy Rowe"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "denis_kreiger@cormier.uk"], ["LIMIT", 1]]
  [1m[36mClient Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Kristy Rowe"], ["email", "denis_kreiger@cormier.uk"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:59:16.441199"], ["updated_at", "2024-01-08 11:59:16.441199"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"138"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 138], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 6ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 2824)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Letitia O'Reilly DDS"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "antwan@mannharber.name"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Letitia O'Reilly DDS"], ["email", "antwan@mannharber.name"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:59:16.594302"], ["updated_at", "2024-01-08 11:59:16.594302"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 139], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Sherwood Johnston"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.2ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Sherwood Johnston"], ["user_id", 139], ["created_at", "2024-01-08 11:59:16.651781"], ["updated_at", "2024-01-08 11:59:16.651781"]]
  [1m[36mLog Create (0.7ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 30], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:59:16.698313"], ["updated_at", "2024-01-08 11:59:16.698313"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Paxton Keebler"], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 AND "categories"."id" != $2 LIMIT $3[0m  [["name", "Sherwood Johnston"], ["id", 30], ["LIMIT", 1]]
  [1m[36mProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Paxton Keebler"], ["price", "441.8134010533449"], ["product_type", "Nuevo"], ["user_id", 139], ["created_at", "2024-01-08 11:59:16.728468"], ["updated_at", "2024-01-08 11:59:16.728468"]]
  [1m[36mLog Create (0.4ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 14], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:59:16.731625"], ["updated_at", "2024-01-08 11:59:16.731625"]]
  [1m[36mProduct::HABTM_Categories Create (1.3ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 14], ["category_id", 30]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (3.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (11.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Aracely Botsford"], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "destiney.harvey@block.name"], ["LIMIT", 1]]
  [1m[36mClient Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Aracely Botsford"], ["email", "destiney.harvey@block.name"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 11:59:40.434165"], ["updated_at", "2024-01-08 11:59:40.434165"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Jo Jerde"], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 139], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Jo Jerde"], ["price", "452.4822769051323"], ["product_type", "Nuevo"], ["user_id", 139], ["created_at", "2024-01-08 11:59:40.441040"], ["updated_at", "2024-01-08 11:59:40.441040"]]
  [1m[36mLog Create (0.3ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 15], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:59:40.442985"], ["updated_at", "2024-01-08 11:59:40.442985"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Paolo Waters"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bo@okeefe.name"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Paolo Waters"], ["email", "bo@okeefe.name"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 11:59:40.450899"], ["updated_at", "2024-01-08 11:59:40.450899"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mCategory Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Linda Wilkinson"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.3ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Linda Wilkinson"], ["user_id", 141], ["created_at", "2024-01-08 11:59:40.454550"], ["updated_at", "2024-01-08 11:59:40.454550"]]
  [1m[36mLog Create (0.3ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 31], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 11:59:40.455766"], ["updated_at", "2024-01-08 11:59:40.455766"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct::HABTM_Categories Create (0.9ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 15], ["category_id", 31]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mClient Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."type" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["type", "Client"], ["id", 140], ["LIMIT", 1]]
  [1m[36mPurchase Create (1.4ms)[0m  [1m[32mINSERT INTO "purchases" ("product_id", "user_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 15], ["user_id", 140], ["quantity", 5], ["created_at", "2024-01-08 11:59:40.485167"], ["updated_at", "2024-01-08 11:59:40.485167"]]
  [1m[36mPurchase Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "purchases" WHERE "purchases"."product_id" = $1[0m  [["product_id", 15]]
[ActiveJob] Enqueued SendFirstPurchaseEmailJob (Job ID: 3fdd7cde-50be-4cba-ba3c-eff8a255c368) to Sidekiq(default) with arguments: 15
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"139", "category_id"=>"30", "client_id"=>"140", "end_date"=>"2024-01-08", "start_date"=>"2024-01-08", "user_id"=>"139"}
  [1m[36mUser Load (8.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 139], ["LIMIT", 1]]
  [1m[36mPurchase Load (4.6ms)[0m  [1m[34mSELECT purchases.* FROM "purchases" INNER JOIN "products" ON "products"."id" = "purchases"."product_id" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" WHERE (categories.id = '30') AND (products.user_id = '139') AND (purchases.user_id = '140') AND "purchases"."created_at" BETWEEN $1 AND $2[0m  [["created_at", "2024-01-08 00:00:00"], ["created_at", "2024-01-08 23:59:59.999999"]]
Completed 200 OK in 3153ms (Views: 17.8ms | ActiveRecord: 13.3ms | Allocations: 12330)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Angelo Luettgen"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "grace@zemlakterry.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Angelo Luettgen"], ["email", "grace@zemlakterry.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:00:51.652449"], ["updated_at", "2024-01-08 12:00:51.652449"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"142"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 191)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Ewell Cartwright"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "westley@schaefer.co.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Ewell Cartwright"], ["email", "westley@schaefer.co.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:00:56.304236"], ["updated_at", "2024-01-08 12:00:56.304236"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"143"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 2067)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Phoebe Adams"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "joyce@wyman.biz"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Phoebe Adams"], ["email", "joyce@wyman.biz"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:00:56.427900"], ["updated_at", "2024-01-08 12:00:56.427900"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 144], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Myra Cormier"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.3ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Myra Cormier"], ["user_id", 144], ["created_at", "2024-01-08 12:00:56.477104"], ["updated_at", "2024-01-08 12:00:56.477104"]]
  [1m[36mLog Create (1.1ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 32], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:00:56.510650"], ["updated_at", "2024-01-08 12:00:56.510650"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Aliza Rutherford"], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 AND "categories"."id" != $2 LIMIT $3[0m  [["name", "Myra Cormier"], ["id", 32], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Aliza Rutherford"], ["price", "445.6500381104727"], ["product_type", "Nuevo"], ["user_id", 144], ["created_at", "2024-01-08 12:00:56.565651"], ["updated_at", "2024-01-08 12:00:56.565651"]]
  [1m[36mLog Create (0.3ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 16], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:00:56.567764"], ["updated_at", "2024-01-08 12:00:56.567764"]]
  [1m[36mProduct::HABTM_Categories Create (0.2ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 16], ["category_id", 32]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Addie Grimes"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ressie_yost@lockmanharber.com"], ["LIMIT", 1]]
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Addie Grimes"], ["email", "ressie_yost@lockmanharber.com"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 12:00:56.580039"], ["updated_at", "2024-01-08 12:00:56.580039"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mClient Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."type" = $1 AND "users"."id" = $2 LIMIT $3[0m  [["type", "Client"], ["id", 145], ["LIMIT", 1]]
  [1m[36mPurchase Create (0.4ms)[0m  [1m[32mINSERT INTO "purchases" ("product_id", "user_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 16], ["user_id", 145], ["quantity", 9], ["created_at", "2024-01-08 12:00:56.599864"], ["updated_at", "2024-01-08 12:00:56.599864"]]
  [1m[36mPurchase Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "purchases" WHERE "purchases"."product_id" = $1[0m  [["product_id", 16]]
[ActiveJob] Enqueued SendFirstPurchaseEmailJob (Job ID: 6adbaf3a-3e00-4b16-8b31-4719c07be4bf) to Sidekiq(default) with arguments: 16
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"144", "category_id"=>"32", "client_id"=>"145", "end_date"=>"2024-01-08", "start_date"=>"2024-01-08", "user_id"=>"144"}
  [1m[36mUser Load (12.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 144], ["LIMIT", 1]]
  [1m[36mPurchase Load (6.0ms)[0m  [1m[34mSELECT purchases.* FROM "purchases" INNER JOIN "products" ON "products"."id" = "purchases"."product_id" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" WHERE (categories.id = '32') AND (products.user_id = '144') AND (purchases.user_id = '145') AND "purchases"."created_at" BETWEEN $1 AND $2[0m  [["created_at", "2024-01-08 00:00:00"], ["created_at", "2024-01-08 23:59:59.999999"]]
Completed 200 OK in 779ms (Views: 11.8ms | ActiveRecord: 18.2ms | Allocations: 9370)
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Naomi Stiedemann"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "chase@morissette.info"], ["LIMIT", 1]]
  [1m[36mClient Create (1.0ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Naomi Stiedemann"], ["email", "chase@morissette.info"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 12:01:32.912179"], ["updated_at", "2024-01-08 12:01:32.912179"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"146"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 146], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 426)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Izabella Toy"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "christ@rohan.uk"], ["LIMIT", 1]]
  [1m[36mClient Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Izabella Toy"], ["email", "christ@rohan.uk"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 12:01:39.353761"], ["updated_at", "2024-01-08 12:01:39.353761"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"147"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 147], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.2ms | ActiveRecord: 0.5ms | Allocations: 2824)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Maria Gleason DVM"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "isom@abshire.com"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Maria Gleason DVM"], ["email", "isom@abshire.com"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:01:39.477272"], ["updated_at", "2024-01-08 12:01:39.477272"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (3.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 148], ["LIMIT", 1]]
  [1m[36mCategory Exists? (2.9ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Keyshawn Beahan"], ["LIMIT", 1]]
  [1m[36mCategory Create (2.1ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Keyshawn Beahan"], ["user_id", 148], ["created_at", "2024-01-08 12:01:39.553456"], ["updated_at", "2024-01-08 12:01:39.553456"]]
  [1m[36mLog Create (0.6ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 33], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:01:39.607987"], ["updated_at", "2024-01-08 12:01:39.607987"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Tiffany Ruecker"], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 AND "categories"."id" != $2 LIMIT $3[0m  [["name", "Keyshawn Beahan"], ["id", 33], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Tiffany Ruecker"], ["price", "233.720473982244"], ["product_type", "Nuevo"], ["user_id", 148], ["created_at", "2024-01-08 12:01:39.632994"], ["updated_at", "2024-01-08 12:01:39.632994"]]
  [1m[36mLog Create (0.2ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 17], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:01:39.635114"], ["updated_at", "2024-01-08 12:01:39.635114"]]
  [1m[36mProduct::HABTM_Categories Create (0.2ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 17], ["category_id", 33]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Alejandrin Veum"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "rachelle@cruickshank.name"], ["LIMIT", 1]]
  [1m[36mClient Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Alejandrin Veum"], ["email", "rachelle@cruickshank.name"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 12:01:39.644288"], ["updated_at", "2024-01-08 12:01:39.644288"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Sharon Heathcote"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "araceli.rowe@becker.us"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Sharon Heathcote"], ["email", "araceli.rowe@becker.us"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:01:39.660886"], ["updated_at", "2024-01-08 12:01:39.660886"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"150"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 193)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Electa Stroman Sr."], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "dana_gibson@ohara.ca"], ["LIMIT", 1]]
  [1m[36mClient Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Electa Stroman Sr."], ["email", "dana_gibson@ohara.ca"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 12:01:53.117455"], ["updated_at", "2024-01-08 12:01:53.117455"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"151"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 151], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 2825)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Alivia Kiehn"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "syble@bartoletti.ca"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Alivia Kiehn"], ["email", "syble@bartoletti.ca"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:01:53.242084"], ["updated_at", "2024-01-08 12:01:53.242084"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"152"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 192)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Clifford Stark"], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "janelle@mccullough.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Clifford Stark"], ["email", "janelle@mccullough.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:01:53.262123"], ["updated_at", "2024-01-08 12:01:53.262123"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 153], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Rudy Gibson"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.4ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Rudy Gibson"], ["user_id", 153], ["created_at", "2024-01-08 12:01:53.322491"], ["updated_at", "2024-01-08 12:01:53.322491"]]
  [1m[36mLog Create (0.5ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 34], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:01:53.375221"], ["updated_at", "2024-01-08 12:01:53.375221"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Lelah Crona PhD"], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 AND "categories"."id" != $2 LIMIT $3[0m  [["name", "Rudy Gibson"], ["id", 34], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Lelah Crona PhD"], ["price", "494.0315362788612"], ["product_type", "Nuevo"], ["user_id", 153], ["created_at", "2024-01-08 12:01:53.396181"], ["updated_at", "2024-01-08 12:01:53.396181"]]
  [1m[36mLog Create (0.2ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 18], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:01:53.398620"], ["updated_at", "2024-01-08 12:01:53.398620"]]
  [1m[36mProduct::HABTM_Categories Create (0.2ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 18], ["category_id", 34]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Clifford Boehm MD"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "ransom_okon@gaylord.name"], ["LIMIT", 1]]
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Clifford Boehm MD"], ["email", "ransom_okon@gaylord.name"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 12:01:53.407552"], ["updated_at", "2024-01-08 12:01:53.407552"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPurchase Create (2.2ms)[0m  [1m[32mINSERT INTO "purchases" ("product_id", "user_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 18], ["user_id", 154], ["quantity", nil], ["created_at", "2024-01-08 12:01:53.416849"], ["updated_at", "2024-01-08 12:01:53.416849"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Clifton Rohan"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jaden.white@rau.name"], ["LIMIT", 1]]
  [1m[36mClient Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Clifton Rohan"], ["email", "jaden.white@rau.name"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 12:02:19.578056"], ["updated_at", "2024-01-08 12:02:19.578056"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"155"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 155], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.2ms | ActiveRecord: 0.3ms | Allocations: 2824)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Valentina Bartell"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "amaya_hilpert@fayzieme.us"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Valentina Bartell"], ["email", "amaya_hilpert@fayzieme.us"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:02:19.715758"], ["updated_at", "2024-01-08 12:02:19.715758"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"156"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 192)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Khalid Connelly"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manley.brakus@runtebrekke.info"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Khalid Connelly"], ["email", "manley.brakus@runtebrekke.info"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:02:19.736601"], ["updated_at", "2024-01-08 12:02:19.736601"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 157], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Makenna Renner"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.3ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Makenna Renner"], ["user_id", 157], ["created_at", "2024-01-08 12:02:19.796033"], ["updated_at", "2024-01-08 12:02:19.796033"]]
  [1m[36mLog Create (0.7ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 35], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:02:19.861981"], ["updated_at", "2024-01-08 12:02:19.861981"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Ransom Weber"], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 AND "categories"."id" != $2 LIMIT $3[0m  [["name", "Makenna Renner"], ["id", 35], ["LIMIT", 1]]
  [1m[36mProduct Create (0.7ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Ransom Weber"], ["price", "491.329206591434"], ["product_type", "Nuevo"], ["user_id", 157], ["created_at", "2024-01-08 12:02:19.886970"], ["updated_at", "2024-01-08 12:02:19.886970"]]
  [1m[36mLog Create (0.4ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 19], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:02:19.890354"], ["updated_at", "2024-01-08 12:02:19.890354"]]
  [1m[36mProduct::HABTM_Categories Create (0.4ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 19], ["category_id", 35]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Arlo Hintz"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "demond@kshlerin.biz"], ["LIMIT", 1]]
  [1m[36mClient Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Arlo Hintz"], ["email", "demond@kshlerin.biz"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 12:02:19.900554"], ["updated_at", "2024-01-08 12:02:19.900554"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPurchase Create (2.6ms)[0m  [1m[32mINSERT INTO "purchases" ("product_id", "user_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 19], ["user_id", 158], ["quantity", 3], ["created_at", "2024-01-08 12:02:19.912101"], ["updated_at", "2024-01-08 12:02:19.912101"]]
  [1m[36mPurchase Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "purchases" WHERE "purchases"."product_id" = $1[0m  [["product_id", 19]]
[ActiveJob] Enqueued SendFirstPurchaseEmailJob (Job ID: 1e812f8a-42b2-4071-8a31-c7daa2abf7b0) to Sidekiq(default) with arguments: 19
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"157", "category_id"=>"35", "client_id"=>"158", "end_date"=>"2024-01-08", "start_date"=>"2024-01-08", "user_id"=>"157"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 157], ["LIMIT", 1]]
  [1m[36mPurchase Load (2.0ms)[0m  [1m[34mSELECT purchases.* FROM "purchases" INNER JOIN "products" ON "products"."id" = "purchases"."product_id" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" WHERE (categories.id = '35') AND (products.user_id = '157') AND (purchases.user_id = '158') AND "purchases"."created_at" BETWEEN $1 AND $2[0m  [["created_at", "2024-01-08 00:00:00"], ["created_at", "2024-01-08 23:59:59.999999"]]
Completed 200 OK in 1280ms (Views: 10.5ms | ActiveRecord: 2.5ms | Allocations: 9133)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Juanita Stiedemann"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bradley@wilkinsonullrich.name"], ["LIMIT", 1]]
  [1m[36mClient Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Juanita Stiedemann"], ["email", "bradley@wilkinsonullrich.name"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 12:02:54.901478"], ["updated_at", "2024-01-08 12:02:54.901478"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"159"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 159], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 7ms (Views: 0.4ms | ActiveRecord: 0.5ms | Allocations: 2824)
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Derek Bergstrom"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "tyrel.hoppe@raynor.co.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Derek Bergstrom"], ["email", "tyrel.hoppe@raynor.co.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:02:55.032284"], ["updated_at", "2024-01-08 12:02:55.032284"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"user_id"=>"160"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 192)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Kacey Strosin"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "trey@weber.co.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Kacey Strosin"], ["email", "trey@weber.co.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:02:55.058232"], ["updated_at", "2024-01-08 12:02:55.058232"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 161], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Lionel Quigley"], ["LIMIT", 1]]
  [1m[36mCategory Create (1.1ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Lionel Quigley"], ["user_id", 161], ["created_at", "2024-01-08 12:02:55.102398"], ["updated_at", "2024-01-08 12:02:55.102398"]]
  [1m[36mLog Create (0.4ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 36], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:02:55.152483"], ["updated_at", "2024-01-08 12:02:55.152483"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Dolly Adams"], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 AND "categories"."id" != $2 LIMIT $3[0m  [["name", "Lionel Quigley"], ["id", 36], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Dolly Adams"], ["price", "452.6720537879565"], ["product_type", "Nuevo"], ["user_id", 161], ["created_at", "2024-01-08 12:02:55.177467"], ["updated_at", "2024-01-08 12:02:55.177467"]]
  [1m[36mLog Create (0.5ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 20], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:02:55.180021"], ["updated_at", "2024-01-08 12:02:55.180021"]]
  [1m[36mProduct::HABTM_Categories Create (0.4ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 20], ["category_id", 36]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Davonte Dickinson"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "nichole.mosciski@rodriguez.com"], ["LIMIT", 1]]
  [1m[36mClient Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Davonte Dickinson"], ["email", "nichole.mosciski@rodriguez.com"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 12:02:55.189572"], ["updated_at", "2024-01-08 12:02:55.189572"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPurchase Create (2.2ms)[0m  [1m[32mINSERT INTO "purchases" ("product_id", "user_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 20], ["user_id", 162], ["quantity", 7], ["created_at", "2024-01-08 12:02:55.199425"], ["updated_at", "2024-01-08 12:02:55.199425"]]
  [1m[36mPurchase Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "purchases" WHERE "purchases"."product_id" = $1[0m  [["product_id", 20]]
[ActiveJob] Enqueued SendFirstPurchaseEmailJob (Job ID: 9ea40753-1a6a-4353-abf8-7a26b1ce2fc0) to Sidekiq(default) with arguments: 20
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"161", "category_id"=>"36", "client_id"=>"162", "end_date"=>"2024-01-08", "start_date"=>"2024-01-08", "user_id"=>"161"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 161], ["LIMIT", 1]]
  [1m[36mPurchase Load (0.7ms)[0m  [1m[34mSELECT purchases.* FROM "purchases" INNER JOIN "products" ON "products"."id" = "purchases"."product_id" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" WHERE (categories.id = '36') AND (products.user_id = '161') AND (purchases.user_id = '162') AND "purchases"."created_at" BETWEEN $1 AND $2[0m  [["created_at", "2024-01-08 00:00:00"], ["created_at", "2024-01-08 23:59:59.999999"]]
Completed 200 OK in 13ms (Views: 6.6ms | ActiveRecord: 0.9ms | Allocations: 3969)
  [1m[36mTRANSACTION (9.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Kianna Steuber"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "eulalia.blick@fisher.co.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Kianna Steuber"], ["email", "eulalia.blick@fisher.co.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:06:02.635935"], ["updated_at", "2024-01-08 12:06:02.635935"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 163], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Madge Heller"], ["LIMIT", 1]]
  [1m[36mCategory Create (1.3ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Madge Heller"], ["user_id", 163], ["created_at", "2024-01-08 12:06:02.693048"], ["updated_at", "2024-01-08 12:06:02.693048"]]
  [1m[36mLog Create (0.8ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 37], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:06:02.732689"], ["updated_at", "2024-01-08 12:06:02.732689"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Turner Roberts MD"], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 AND "categories"."id" != $2 LIMIT $3[0m  [["name", "Madge Heller"], ["id", 37], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Turner Roberts MD"], ["price", "37.43447664642034"], ["product_type", "Nuevo"], ["user_id", 163], ["created_at", "2024-01-08 12:06:02.756553"], ["updated_at", "2024-01-08 12:06:02.756553"]]
  [1m[36mLog Create (0.3ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 21], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:06:02.758498"], ["updated_at", "2024-01-08 12:06:02.758498"]]
  [1m[36mProduct::HABTM_Categories Create (0.4ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 21], ["category_id", 37]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Lesly Mueller"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "colten.collins@barton.name"], ["LIMIT", 1]]
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Lesly Mueller"], ["email", "colten.collins@barton.name"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 12:06:02.777793"], ["updated_at", "2024-01-08 12:06:02.777793"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPurchase Create (1.7ms)[0m  [1m[32mINSERT INTO "purchases" ("product_id", "user_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 21], ["user_id", 164], ["quantity", 2], ["created_at", "2024-01-08 12:06:02.789523"], ["updated_at", "2024-01-08 12:06:02.789523"]]
  [1m[36mPurchase Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "purchases" WHERE "purchases"."product_id" = $1[0m  [["product_id", 21]]
[ActiveJob] Enqueued SendFirstPurchaseEmailJob (Job ID: 830fe553-b826-43a0-9dfb-c2b5b8e81145) to Sidekiq(default) with arguments: 21
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"164", "category_id"=>"37", "client_id"=>"164", "end_date"=>"2024-01-08", "start_date"=>"2024-01-08", "user_id"=>"163"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 163], ["LIMIT", 1]]
  [1m[36mPurchase Load (0.9ms)[0m  [1m[34mSELECT purchases.* FROM "purchases" INNER JOIN "products" ON "products"."id" = "purchases"."product_id" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" WHERE (categories.id = '37') AND (products.user_id = '164') AND (purchases.user_id = '164') AND "purchases"."created_at" BETWEEN $1 AND $2[0m  [["created_at", "2024-01-08 00:00:00"], ["created_at", "2024-01-08 23:59:59.999999"]]
Completed 200 OK in 17ms (Views: 6.5ms | ActiveRecord: 1.4ms | Allocations: 5890)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Jermey Jones"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "myrtice_kub@schuppe.us"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Jermey Jones"], ["email", "myrtice_kub@schuppe.us"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:06:02.986161"], ["updated_at", "2024-01-08 12:06:02.986161"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Hazel Powlowski"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mose@smitham.info"], ["LIMIT", 1]]
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Hazel Powlowski"], ["email", "mose@smitham.info"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 12:06:02.990458"], ["updated_at", "2024-01-08 12:06:02.990458"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 165], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Tyrique Schoen"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.2ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Tyrique Schoen"], ["user_id", 165], ["created_at", "2024-01-08 12:06:02.995043"], ["updated_at", "2024-01-08 12:06:02.995043"]]
  [1m[36mLog Create (0.2ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 38], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:06:02.996319"], ["updated_at", "2024-01-08 12:06:02.996319"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"166", "category_id"=>"38", "client_id"=>"166", "end_date"=>"2024-01-08", "start_date"=>"2024-01-08", "user_id"=>"165"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms | Allocations: 214)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Dora Reilly"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "rex.ondricka@cummeratabeatty.co.uk"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Dora Reilly"], ["email", "rex.ondricka@cummeratabeatty.co.uk"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:06:03.005868"], ["updated_at", "2024-01-08 12:06:03.005868"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 167], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Diamond Boehm"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.2ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Diamond Boehm"], ["user_id", 167], ["created_at", "2024-01-08 12:06:03.010836"], ["updated_at", "2024-01-08 12:06:03.010836"]]
  [1m[36mLog Create (0.2ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 39], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:06:03.011912"], ["updated_at", "2024-01-08 12:06:03.011912"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Margot Durgan"], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 AND "categories"."id" != $2 LIMIT $3[0m  [["name", "Diamond Boehm"], ["id", 39], ["LIMIT", 1]]
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Margot Durgan"], ["price", "317.6851045036486"], ["product_type", "Nuevo"], ["user_id", 167], ["created_at", "2024-01-08 12:06:03.018956"], ["updated_at", "2024-01-08 12:06:03.018956"]]
  [1m[36mLog Create (0.2ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 22], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:06:03.020141"], ["updated_at", "2024-01-08 12:06:03.020141"]]
  [1m[36mProduct::HABTM_Categories Create (0.2ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 22], ["category_id", 39]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Aniyah Funk"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "bridie@beahan.uk"], ["LIMIT", 1]]
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Aniyah Funk"], ["email", "bridie@beahan.uk"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 12:06:03.024651"], ["updated_at", "2024-01-08 12:06:03.024651"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPurchase Create (0.6ms)[0m  [1m[32mINSERT INTO "purchases" ("product_id", "user_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 22], ["user_id", 168], ["quantity", 1], ["created_at", "2024-01-08 12:06:03.026236"], ["updated_at", "2024-01-08 12:06:03.026236"]]
  [1m[36mPurchase Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "purchases" WHERE "purchases"."product_id" = $1[0m  [["product_id", 22]]
[ActiveJob] Enqueued SendFirstPurchaseEmailJob (Job ID: 7bb655b5-5be6-47f0-b59b-172d5cbecc20) to Sidekiq(default) with arguments: 22
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"167", "category_id"=>"39", "client_id"=>"168", "end_date"=>"2024-01-08", "start_date"=>"2024-01-08", "user_id"=>"167"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 167], ["LIMIT", 1]]
  [1m[36mPurchase Load (1.1ms)[0m  [1m[34mSELECT purchases.* FROM "purchases" INNER JOIN "products" ON "products"."id" = "purchases"."product_id" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" WHERE (categories.id = '39') AND (products.user_id = '167') AND (purchases.user_id = '168') AND "purchases"."created_at" BETWEEN $1 AND $2[0m  [["created_at", "2024-01-08 00:00:00"], ["created_at", "2024-01-08 23:59:59.999999"]]
Completed 200 OK in 5ms (Views: 1.5ms | ActiveRecord: 1.3ms | Allocations: 1304)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Reed Kris"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "santino@sipes.info"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Reed Kris"], ["email", "santino@sipes.info"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:07:03.416259"], ["updated_at", "2024-01-08 12:07:03.416259"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Hertha Cole"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "vanessa@parisian.name"], ["LIMIT", 1]]
  [1m[36mClient Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Hertha Cole"], ["email", "vanessa@parisian.name"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 12:07:03.429551"], ["updated_at", "2024-01-08 12:07:03.429551"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 169], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Vita Gleason"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.5ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Vita Gleason"], ["user_id", 169], ["created_at", "2024-01-08 12:07:03.469039"], ["updated_at", "2024-01-08 12:07:03.469039"]]
  [1m[36mLog Create (1.8ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 40], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:07:03.508307"], ["updated_at", "2024-01-08 12:07:03.508307"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"170", "category_id"=>"40", "client_id"=>"170", "end_date"=>"2024-01-08", "start_date"=>"2024-01-08", "user_id"=>"169"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 2067)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Dorian Ernser"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jamison.rosenbaum@watsica.com"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Dorian Ernser"], ["email", "jamison.rosenbaum@watsica.com"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:07:03.641743"], ["updated_at", "2024-01-08 12:07:03.641743"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 171], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Zula Dicki"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.3ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Zula Dicki"], ["user_id", 171], ["created_at", "2024-01-08 12:07:03.693948"], ["updated_at", "2024-01-08 12:07:03.693948"]]
  [1m[36mLog Create (0.2ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 41], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:07:03.695449"], ["updated_at", "2024-01-08 12:07:03.695449"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Simeon Schaefer"], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 AND "categories"."id" != $2 LIMIT $3[0m  [["name", "Zula Dicki"], ["id", 41], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Simeon Schaefer"], ["price", "28.13822330597703"], ["product_type", "Nuevo"], ["user_id", 171], ["created_at", "2024-01-08 12:07:03.718900"], ["updated_at", "2024-01-08 12:07:03.718900"]]
  [1m[36mLog Create (0.3ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 23], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:07:03.720851"], ["updated_at", "2024-01-08 12:07:03.720851"]]
  [1m[36mProduct::HABTM_Categories Create (0.2ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 23], ["category_id", 41]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Danika Kessler"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mitchel@leannondouglas.co.uk"], ["LIMIT", 1]]
  [1m[36mClient Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Danika Kessler"], ["email", "mitchel@leannondouglas.co.uk"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 12:07:03.732134"], ["updated_at", "2024-01-08 12:07:03.732134"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPurchase Create (0.7ms)[0m  [1m[32mINSERT INTO "purchases" ("product_id", "user_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 23], ["user_id", 172], ["quantity", 1], ["created_at", "2024-01-08 12:07:03.746084"], ["updated_at", "2024-01-08 12:07:03.746084"]]
  [1m[36mPurchase Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "purchases" WHERE "purchases"."product_id" = $1[0m  [["product_id", 23]]
[ActiveJob] Enqueued SendFirstPurchaseEmailJob (Job ID: adc35f54-5af5-4bea-a0c4-c1bf34c8a99a) to Sidekiq(default) with arguments: 23
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Chelsea Torphy"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "abdullah.kunze@tillman.info"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Chelsea Torphy"], ["email", "abdullah.kunze@tillman.info"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:07:03.764529"], ["updated_at", "2024-01-08 12:07:03.764529"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 173], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Maximilian Davis DVM"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.4ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Maximilian Davis DVM"], ["user_id", 173], ["created_at", "2024-01-08 12:07:03.771078"], ["updated_at", "2024-01-08 12:07:03.771078"]]
  [1m[36mLog Create (0.4ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 42], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:07:03.772558"], ["updated_at", "2024-01-08 12:07:03.772558"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Paris Schowalter"], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 AND "categories"."id" != $2 LIMIT $3[0m  [["name", "Maximilian Davis DVM"], ["id", 42], ["LIMIT", 1]]
  [1m[36mProduct Create (1.7ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Paris Schowalter"], ["price", "219.9477516933482"], ["product_type", "Nuevo"], ["user_id", 173], ["created_at", "2024-01-08 12:07:03.779149"], ["updated_at", "2024-01-08 12:07:03.779149"]]
  [1m[36mLog Create (0.4ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 24], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:07:03.782267"], ["updated_at", "2024-01-08 12:07:03.782267"]]
  [1m[36mProduct::HABTM_Categories Create (0.4ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 24], ["category_id", 42]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Adan Kling"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "billy_crona@greenfelder.ca"], ["LIMIT", 1]]
  [1m[36mClient Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Adan Kling"], ["email", "billy_crona@greenfelder.ca"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 12:07:03.789425"], ["updated_at", "2024-01-08 12:07:03.789425"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPurchase Create (1.0ms)[0m  [1m[32mINSERT INTO "purchases" ("product_id", "user_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 24], ["user_id", 174], ["quantity", 6], ["created_at", "2024-01-08 12:07:03.791409"], ["updated_at", "2024-01-08 12:07:03.791409"]]
  [1m[36mPurchase Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "purchases" WHERE "purchases"."product_id" = $1[0m  [["product_id", 24]]
[ActiveJob] Enqueued SendFirstPurchaseEmailJob (Job ID: 2e4d3f4a-1912-447f-949a-055c94eeaa7b) to Sidekiq(default) with arguments: 24
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"173", "category_id"=>"42", "client_id"=>"174", "end_date"=>"2024-01-08", "start_date"=>"2024-01-08", "user_id"=>"173"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 173], ["LIMIT", 1]]
  [1m[36mPurchase Load (2.1ms)[0m  [1m[34mSELECT purchases.* FROM "purchases" INNER JOIN "products" ON "products"."id" = "purchases"."product_id" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" WHERE (categories.id = '42') AND (products.user_id = '173') AND (purchases.user_id = '174') AND "purchases"."created_at" BETWEEN $1 AND $2[0m  [["created_at", "2024-01-08 00:00:00"], ["created_at", "2024-01-08 23:59:59.999999"]]
Completed 200 OK in 13ms (Views: 7.9ms | ActiveRecord: 1.6ms | Allocations: 4051)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Amaya Kshlerin"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "adah@beer.info"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Amaya Kshlerin"], ["email", "adah@beer.info"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:07:27.185464"], ["updated_at", "2024-01-08 12:07:27.185464"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 175], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Verla Stiedemann"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.2ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Verla Stiedemann"], ["user_id", 175], ["created_at", "2024-01-08 12:07:27.228102"], ["updated_at", "2024-01-08 12:07:27.228102"]]
  [1m[36mLog Create (0.4ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 43], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:07:27.250935"], ["updated_at", "2024-01-08 12:07:27.250935"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Edward Koelpin"], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 AND "categories"."id" != $2 LIMIT $3[0m  [["name", "Verla Stiedemann"], ["id", 43], ["LIMIT", 1]]
  [1m[36mProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Edward Koelpin"], ["price", "149.2268210583217"], ["product_type", "Nuevo"], ["user_id", 175], ["created_at", "2024-01-08 12:07:27.269382"], ["updated_at", "2024-01-08 12:07:27.269382"]]
  [1m[36mLog Create (0.3ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 25], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:07:27.271517"], ["updated_at", "2024-01-08 12:07:27.271517"]]
  [1m[36mProduct::HABTM_Categories Create (0.3ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 25], ["category_id", 43]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Zella Okuneva"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "nola@shields.ca"], ["LIMIT", 1]]
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Zella Okuneva"], ["email", "nola@shields.ca"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 12:07:27.289676"], ["updated_at", "2024-01-08 12:07:27.289676"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPurchase Create (1.0ms)[0m  [1m[32mINSERT INTO "purchases" ("product_id", "user_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 25], ["user_id", 176], ["quantity", 10], ["created_at", "2024-01-08 12:07:27.300383"], ["updated_at", "2024-01-08 12:07:27.300383"]]
  [1m[36mPurchase Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "purchases" WHERE "purchases"."product_id" = $1[0m  [["product_id", 25]]
[ActiveJob] Enqueued SendFirstPurchaseEmailJob (Job ID: 4d85f677-1b36-499d-8dd9-fc41ecb77033) to Sidekiq(default) with arguments: 25
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Jan Stanton IV"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "emmett@schimmel.name"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Jan Stanton IV"], ["email", "emmett@schimmel.name"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:07:27.361870"], ["updated_at", "2024-01-08 12:07:27.361870"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Rudy Cassin"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "robb@wisoky.biz"], ["LIMIT", 1]]
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Rudy Cassin"], ["email", "robb@wisoky.biz"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 12:07:27.366074"], ["updated_at", "2024-01-08 12:07:27.366074"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 177], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Francesca Wolff"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.2ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Francesca Wolff"], ["user_id", 177], ["created_at", "2024-01-08 12:07:27.371992"], ["updated_at", "2024-01-08 12:07:27.371992"]]
  [1m[36mLog Create (0.2ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 44], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:07:27.373273"], ["updated_at", "2024-01-08 12:07:27.373273"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"178", "category_id"=>"44", "client_id"=>"178", "end_date"=>"2024-01-08", "start_date"=>"2024-01-08", "user_id"=>"177"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 5ms (Views: 0.6ms | ActiveRecord: 0.0ms | Allocations: 2057)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Mellie Kunde"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "jayme_herman@bergstrom.com"], ["LIMIT", 1]]
  [1m[36mAdmin Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Mellie Kunde"], ["email", "jayme_herman@bergstrom.com"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:07:27.484017"], ["updated_at", "2024-01-08 12:07:27.484017"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 179], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Beth Abshire"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.8ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Beth Abshire"], ["user_id", 179], ["created_at", "2024-01-08 12:07:27.491270"], ["updated_at", "2024-01-08 12:07:27.491270"]]
  [1m[36mLog Create (0.4ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 45], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:07:27.493719"], ["updated_at", "2024-01-08 12:07:27.493719"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Verlie Streich"], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 AND "categories"."id" != $2 LIMIT $3[0m  [["name", "Beth Abshire"], ["id", 45], ["LIMIT", 1]]
  [1m[36mProduct Create (1.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Verlie Streich"], ["price", "75.39167964503876"], ["product_type", "Nuevo"], ["user_id", 179], ["created_at", "2024-01-08 12:07:27.498691"], ["updated_at", "2024-01-08 12:07:27.498691"]]
  [1m[36mLog Create (0.5ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 26], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:07:27.501858"], ["updated_at", "2024-01-08 12:07:27.501858"]]
  [1m[36mProduct::HABTM_Categories Create (0.5ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 26], ["category_id", 45]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Kieran Wehner"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "hayden@rau.info"], ["LIMIT", 1]]
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Kieran Wehner"], ["email", "hayden@rau.info"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 12:07:27.511875"], ["updated_at", "2024-01-08 12:07:27.511875"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPurchase Create (0.5ms)[0m  [1m[32mINSERT INTO "purchases" ("product_id", "user_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 26], ["user_id", 180], ["quantity", 6], ["created_at", "2024-01-08 12:07:27.513463"], ["updated_at", "2024-01-08 12:07:27.513463"]]
  [1m[36mPurchase Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "purchases" WHERE "purchases"."product_id" = $1[0m  [["product_id", 26]]
[ActiveJob] Enqueued SendFirstPurchaseEmailJob (Job ID: b15e170c-8307-4281-b319-50c325ed86cf) to Sidekiq(default) with arguments: 26
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"179", "category_id"=>"45", "client_id"=>"180", "end_date"=>"2024-01-08", "start_date"=>"2024-01-08", "user_id"=>"179"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 179], ["LIMIT", 1]]
  [1m[36mPurchase Load (0.9ms)[0m  [1m[34mSELECT purchases.* FROM "purchases" INNER JOIN "products" ON "products"."id" = "purchases"."product_id" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" WHERE (categories.id = '45') AND (products.user_id = '179') AND (purchases.user_id = '180') AND "purchases"."created_at" BETWEEN $1 AND $2[0m  [["created_at", "2024-01-08 00:00:00"], ["created_at", "2024-01-08 23:59:59.999999"]]
Completed 200 OK in 14ms (Views: 8.6ms | ActiveRecord: 1.1ms | Allocations: 4052)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Kane Torp"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "zachery@osinski.ca"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Kane Torp"], ["email", "zachery@osinski.ca"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:08:00.348446"], ["updated_at", "2024-01-08 12:08:00.348446"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 181], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Shania Hickle"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.7ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Shania Hickle"], ["user_id", 181], ["created_at", "2024-01-08 12:08:00.410541"], ["updated_at", "2024-01-08 12:08:00.410541"]]
  [1m[36mLog Create (0.7ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 46], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:08:00.434498"], ["updated_at", "2024-01-08 12:08:00.434498"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Janiya Wolff"], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 AND "categories"."id" != $2 LIMIT $3[0m  [["name", "Shania Hickle"], ["id", 46], ["LIMIT", 1]]
  [1m[36mProduct Create (0.5ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Janiya Wolff"], ["price", "453.5383100310791"], ["product_type", "Nuevo"], ["user_id", 181], ["created_at", "2024-01-08 12:08:00.455912"], ["updated_at", "2024-01-08 12:08:00.455912"]]
  [1m[36mLog Create (0.5ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 27], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:08:00.458552"], ["updated_at", "2024-01-08 12:08:00.458552"]]
  [1m[36mProduct::HABTM_Categories Create (0.6ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 27], ["category_id", 46]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Jamison McCullough"], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "agnes@boyergislason.biz"], ["LIMIT", 1]]
  [1m[36mClient Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Jamison McCullough"], ["email", "agnes@boyergislason.biz"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 12:08:00.477763"], ["updated_at", "2024-01-08 12:08:00.477763"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPurchase Create (0.8ms)[0m  [1m[32mINSERT INTO "purchases" ("product_id", "user_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 27], ["user_id", 182], ["quantity", 6], ["created_at", "2024-01-08 12:08:00.492259"], ["updated_at", "2024-01-08 12:08:00.492259"]]
  [1m[36mPurchase Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "purchases" WHERE "purchases"."product_id" = $1[0m  [["product_id", 27]]
[ActiveJob] Enqueued SendFirstPurchaseEmailJob (Job ID: 0c4228e3-3912-4def-912e-1a84f680a0b7) to Sidekiq(default) with arguments: 27
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"181", "category_id"=>"46", "client_id"=>"182", "end_date"=>"2024-01-08", "start_date"=>"2024-01-08", "user_id"=>"182"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 182], ["LIMIT", 1]]
Filter chain halted as :validate_admin? rendered or redirected
Completed 401 Unauthorized in 8ms (Views: 0.2ms | ActiveRecord: 0.2ms | Allocations: 2620)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Jazmyn Murphy MD"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "alfredo_roberts@keeling.name"], ["LIMIT", 1]]
  [1m[36mAdmin Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Jazmyn Murphy MD"], ["email", "alfredo_roberts@keeling.name"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:08:00.664077"], ["updated_at", "2024-01-08 12:08:00.664077"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Dr. Napoleon Nader"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "elenor_dicki@lesch.com"], ["LIMIT", 1]]
  [1m[36mClient Create (0.2ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Dr. Napoleon Nader"], ["email", "elenor_dicki@lesch.com"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 12:08:00.668263"], ["updated_at", "2024-01-08 12:08:00.668263"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 183], ["LIMIT", 1]]
  [1m[36mCategory Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Domenick Gottlieb"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.3ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Domenick Gottlieb"], ["user_id", 183], ["created_at", "2024-01-08 12:08:00.674790"], ["updated_at", "2024-01-08 12:08:00.674790"]]
  [1m[36mLog Create (0.3ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 47], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:08:00.676520"], ["updated_at", "2024-01-08 12:08:00.676520"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"184", "category_id"=>"47", "client_id"=>"184", "end_date"=>"2024-01-08", "start_date"=>"2024-01-08", "user_id"=>"183"}
Filter chain halted as :authenticate_user rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms | Allocations: 192)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Nelda Kemmer Sr."], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "cleora@hermistonkovacek.us"], ["LIMIT", 1]]
  [1m[36mAdmin Create (1.6ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Nelda Kemmer Sr."], ["email", "cleora@hermistonkovacek.us"], ["password", "[FILTERED]"], ["type", "Admin"], ["created_at", "2024-01-08 12:08:00.684914"], ["updated_at", "2024-01-08 12:08:00.684914"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 185], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 LIMIT $2[0m  [["name", "Mason Hessel"], ["LIMIT", 1]]
  [1m[36mCategory Create (0.2ms)[0m  [1m[32mINSERT INTO "categories" ("name", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["name", "Mason Hessel"], ["user_id", 185], ["created_at", "2024-01-08 12:08:00.693517"], ["updated_at", "2024-01-08 12:08:00.693517"]]
  [1m[36mLog Create (0.2ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Category"], ["model_id", 48], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:08:00.694621"], ["updated_at", "2024-01-08 12:08:00.694621"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mProduct Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = $1 LIMIT $2[0m  [["name", "Ubaldo Rippin"], ["LIMIT", 1]]
  [1m[36mCategory Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "categories" WHERE "categories"."name" = $1 AND "categories"."id" != $2 LIMIT $3[0m  [["name", "Mason Hessel"], ["id", 48], ["LIMIT", 1]]
  [1m[36mProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "product_type", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Ubaldo Rippin"], ["price", "113.6579640435925"], ["product_type", "Nuevo"], ["user_id", 185], ["created_at", "2024-01-08 12:08:00.698769"], ["updated_at", "2024-01-08 12:08:00.698769"]]
  [1m[36mLog Create (0.4ms)[0m  [1m[32mINSERT INTO "logs" ("user_id", "model_type", "model_id", "log_type", "log_changes", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["user_id", nil], ["model_type", "Product"], ["model_id", 28], ["log_type", "Create"], ["log_changes", ""], ["created_at", "2024-01-08 12:08:00.700413"], ["updated_at", "2024-01-08 12:08:00.700413"]]
  [1m[36mProduct::HABTM_Categories Create (0.2ms)[0m  [1m[32mINSERT INTO "categories_products" ("product_id", "category_id") VALUES ($1, $2)[0m  [["product_id", 28], ["category_id", 48]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."name" = $1 LIMIT $2[0m  [["name", "Harmony Christiansen"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "erin_tromp@crooks.ca"], ["LIMIT", 1]]
  [1m[36mClient Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("name", "email", "password", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Harmony Christiansen"], ["email", "erin_tromp@crooks.ca"], ["password", "[FILTERED]"], ["type", "Client"], ["created_at", "2024-01-08 12:08:00.706670"], ["updated_at", "2024-01-08 12:08:00.706670"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mPurchase Create (0.5ms)[0m  [1m[32mINSERT INTO "purchases" ("product_id", "user_id", "quantity", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["product_id", 28], ["user_id", 186], ["quantity", 3], ["created_at", "2024-01-08 12:08:00.709530"], ["updated_at", "2024-01-08 12:08:00.709530"]]
  [1m[36mPurchase Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "purchases" WHERE "purchases"."product_id" = $1[0m  [["product_id", 28]]
[ActiveJob] Enqueued SendFirstPurchaseEmailJob (Job ID: e3064614-db9a-402b-b960-03a64f483f0a) to Sidekiq(default) with arguments: 28
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#purchase_list as HTML
  Parameters: {"admin_id"=>"185", "category_id"=>"48", "client_id"=>"186", "end_date"=>"2024-01-08", "start_date"=>"2024-01-08", "user_id"=>"185"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 185], ["LIMIT", 1]]
  [1m[36mPurchase Load (1.0ms)[0m  [1m[34mSELECT purchases.* FROM "purchases" INNER JOIN "products" ON "products"."id" = "purchases"."product_id" INNER JOIN "categories_products" ON "categories_products"."product_id" = "products"."id" INNER JOIN "categories" ON "categories"."id" = "categories_products"."category_id" WHERE (categories.id = '48') AND (products.user_id = '185') AND (purchases.user_id = '186') AND "purchases"."created_at" BETWEEN $1 AND $2[0m  [["created_at", "2024-01-08 00:00:00"], ["created_at", "2024-01-08 23:59:59.999999"]]
Completed 200 OK in 17ms (Views: 12.7ms | ActiveRecord: 1.2ms | Allocations: 3874)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
